"bundle";!function(){var a=System.amdDefine;a("app.html!github:systemjs/plugin-text@0.0.3.js",[],function(){return'<template> <require from="nav-bar.html"></require> <require from="bootstrap/css/bootstrap.css"></require> <nav-bar router.bind="router"></nav-bar> <div class="page-host"> <router-view></router-view> </div> </template>'})}(),System.register("app.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("App",d=function(){function a(){c(this,a)}return a.prototype.configureRouter=function(a,b){a.title="Damp Hamlet",a.map([{route:["","welcome"],name:"welcome",moduleId:"welcome",nav:!0,title:"Welcome"},{route:"game",name:"game",moduleId:"game",nav:!1,title:"old"},{route:"damphamlet",name:"damphamlet",moduleId:"damphamlet",nav:!0,title:"Play"},{route:"changelog",name:"patchnotes",moduleId:"changelog",nav:!0,title:"Patch Notes"}]),this.router=b},a}()),a("App",d)}}}),function(){var a=System.amdDefine;a("changelog.html!github:systemjs/plugin-text@0.0.3.js",[],function(){return'<template> <title>Change Log</title> <h2>Patch History</h2> <div class="changelog"> <ol> <li> <p>Monday 1/4</p> <ul> <li>Added a link to changelog from home page</li> <li>Added changelog.html page</li> </ul> </li> <li> <p>Friday 1/1</p> <ul> <li>Added psionic defenses on F1 for Psi Ops</li> <li>Added Psi Ops class</li> <li>Added female gender</li> </ul> </li> </ol> </div> </template>'})}(),System.register("changelog.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("Changelog",d=function b(){c(this,b)}),a("Changelog",d)}}}),System.register("client/game/extra.js",[],function(a,b){"use strict";function c(){socket.emit("PushDB")}function d(){f(function(){game=new Phaser.Game(gameWidth,gameHeight,Phaser.AUTO,"gameWindow",{preload:g,create:h,update:o}),$(".playerid").text(0)})}function e(){}function f(a){socket.emit("connectPlayerToServer",JSON.stringify(player)),a()}function g(){this.game.load.image("knight","assets/knight_l.png"),this.game.load.image("slime","assets/slime.png"),this.game.load.image("wood_mace","assets/wood_mace.png")}function h(){game.physics.startSystem(Phaser.Physics.P2JS),game.physics.p2.setImpactEvents(!0),game.physics.p2.restitution=.8,game.world.setBounds(0,0,1920,1920),cursors=game.input.keyboard.createCursorKeys(),wasd={up:this.game.input.keyboard.addKey(Phaser.Keyboard.W),down:this.game.input.keyboard.addKey(Phaser.Keyboard.S),left:this.game.input.keyboard.addKey(Phaser.Keyboard.A),right:this.game.input.keyboard.addKey(Phaser.Keyboard.D)},playerCollisionGroup=game.physics.p2.createCollisionGroup(),enemyCollisionGroup=game.physics.p2.createCollisionGroup(),weaponCollisionGroup=game.physics.p2.createCollisionGroup(),i(),player=players[0],slimes=game.add.group(),slimes.enableBody=!0,slimes.physicsBodyType=Phaser.Physics.P2JS,weapons=game.add.group(),weapons.enableBody=!0,weapons.physicsBodyType=Phaser.Physics.P2JS,j()}function i(){var a=game.add.sprite(game.world.randomX,game.world.randomY,"knight");game.physics.p2.enable(a,!1),a.body.setCircle(10),a.body.setCollisionGroup(playerCollisionGroup),a.body.fixedRotation=!0,a.speed=200,game.camera.follow(a),a.body.collides([enemyCollisionGroup,weaponCollisionGroup]),players.push(a)}function j(){function a(a,b){this.hp-=1,this.hp<1&&(r--,$(".enemyCount").text(r),this.kill())}var b=400;r+=b;for(var c=0;b>c;c++){var d=slimes.create(game.world.randomX,game.world.randomY,"slime");d.body.setCircle(10),d.body.setCollisionGroup(enemyCollisionGroup),d.body.fixedRotation=!0,d.speed=50*Math.random(),game.physics.p2.enable(d),d.hp=1,d.body.collides(weaponCollisionGroup,a,d),d.body.collides([enemyCollisionGroup,playerCollisionGroup]),enemies.push(d)}}function k(){for(var a=0;a<enemies.length;a++)l(enemies[a])}function l(a){game.physics.arcade.moveToObject(a,player,a.speed)}function m(){if(game.time.now>nextAttack){s++,$(".weaponCount").text(s),nextAttack=game.time.now+attackRate;var a=weapons.create(player.body.x,player.body.y,"wood_mace");game.physics.p2.enable(a),a.physicsBodyType=Phaser.Physics.p2,a.enableBody=!0,a.speed=500,a.damage=1,0==direction&&a.body.moveLeft(a.speed),1==direction&&a.body.moveRight(a.speed),2==direction&&a.body.moveUp(a.speed),3==direction&&a.body.moveDown(a.speed),a.body.setCircle(5),a.body.setCollisionGroup(weaponCollisionGroup),a.body.collides(enemyCollisionGroup,n,a)}}function n(a,b){this.kill()}function o(){p(),e(),k()}function p(a){a.body.setZeroVelocity(),(cursors.left.isDown||wasd.left.isDown)&&(a.body.moveLeft(a.speed),a.scale.x=1,a.direction=0),(cursors.right.isDown||wasd.right.isDown)&&(a.body.moveRight(a.speed),a.scale.x=-1,a.direction=1),(cursors.up.isDown||wasd.up.isDown)&&(a.body.moveUp(a.speed),a.direction=2),(cursors.down.isDown||wasd.down.isDown)&&(a.body.moveDown(a.speed),a.direction=3),game.input.activePointer.isDown&&m()}var q,r,s;return{setters:[],execute:function(){q=function(){socket.on("handshakeToClient",function(a){}),socket.on("AddPlayerToClient",function(a){var b=JSON.parse(a);b.sprite=game.add.sprite(gameWidth/2,gameHeight/2,"knight"),b.sprite.anchor.setTo(.5,1),game.physics.arcade.enable(b.sprite),players[player.id]=b,console.log("Add player to client: "+JSON.stringify(b))}),socket.on("AddPlayerToUI",function(a){$(".ulPlayerList").empty();var b;for(b=0;b<a.length;b++)$(".ulPlayerList").append("<li>"+a[b].name+"</li>")}),socket.on("UpdateUsers",function(a){$(".playerCount").text(a)}),socket.on("UpdateConnections",function(a){connections=a,$(".connectedCount").text(connections)}),socket.on("UpdatePlayers",function(a){var b=JSON.parse(a),c=players[b.id];c.sprite.body.x=b.x,c.sprite.body.y=b.y}),socket.on("SendUser",function(a){var b="<ul>"+a.PlayerId+" "+a.name+"</ul>";$(".ulUser").append(b)}),$(".play").click(function(){f(function(){game=new Phaser.Game(gameWidth,gameHeight,Phaser.AUTO,"gameWindow",{preload:g,create:h,update:o}),player.name=$(".inputName").val(),$(".playerid").text(player.id)})}),$(".update").click(function(){e()}),$(".pushdb").click(function(){c()}),d()},r=0,s=0,q()}}}),System.register("client/game/items/grenade.js",["phaser","./item"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h;return{setters:[function(a){f=a["default"]},function(a){g=a.Item}],execute:function(){a("Grenade",h=function(a){function b(e,f,g){c(this,b);var h=d(this,a.call(this,e,f,g,"item-93"));return h.item=a.prototype.getItem.call(h),h.game=e,h.item.damage=5,h.item.body.collides(e.playerCollisionGroup,h.pickup,h),h}return e(b,a),b.prototype.pickup=function(b,c){c.sprite.hp+=this.item.health,$(".health").text(c.sprite.hp),a.prototype.destroy.call(this)},b}(g)),a("Grenade",h)}}}),System.register("client/game/mobs/blackblob.js",["./mob"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Mob}],execute:function(){a("Blackblob",g=function(a){function b(e,f,g,h){c(this,b);var i=d(this,a.call(this,e,"blackblob",f,g,h));return i.sprite=a.prototype.getSprite.call(i),i.game=f,i.speed+=5*Math.random(),i.hp=40,i.nextAttack=1e3,i.attackRate=200+1e3*Math.random(),i}return e(b,a),b.prototype.move=function(){a.prototype.move.call(this)},b.prototype.attack=function(){a.prototype.attack.call(this)},b.prototype.weaponHit=function(b,c){a.prototype.weaponHit.call(this,b,c)},b.prototype.enemyHitByWeapon=function(b,c){a.prototype.enemyHitByWeapon.call(this,b,c)},b}(f)),a("Blackblob",g)}}}),System.register("client/game/mobs/blackredalien.js",["./mob"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Mob}],execute:function(){a("BlackRed",g=function(a){function b(e,f,g,h){c(this,b);var i=d(this,a.call(this,e,"blackred_alien",f,g,h));return i.sprite=a.prototype.getSprite.call(i),i.game=f,i.speed+=5*Math.random(),i.hp=40,i.nextAttack=1e3,i.attackRate=200+1e3*Math.random(),i}return e(b,a),b.prototype.move=function(){a.prototype.move.call(this)},b.prototype.attack=function(){a.prototype.attack.call(this)},b.prototype.weaponHit=function(b,c){a.prototype.weaponHit.call(this,b,c)},b.prototype.enemyHitByWeapon=function(b,c){a.prototype.enemyHitByWeapon.call(this,b,c)},b}(f)),a("BlackRed",g)}}}),System.register("client/game/mobs/bluealien.js",["./mob"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Mob}],execute:function(){a("BlueAlien",g=function(a){function b(e,f,g,h){c(this,b);var i=d(this,a.call(this,e,"blue_alien",f,g,h));return i.sprite=a.prototype.getSprite.call(i),i.game=f,i.speed+=5*Math.random(),i.hp=40,i.nextAttack=1e3,i.attackRate=200+1e3*Math.random(),i}return e(b,a),b.prototype.move=function(){a.prototype.move.call(this)},b.prototype.attack=function(){a.prototype.attack.call(this)},b.prototype.weaponHit=function(b,c){a.prototype.weaponHit.call(this,b,c)},b.prototype.enemyHitByWeapon=function(b,c){a.prototype.enemyHitByWeapon.call(this,b,c)},b}(f)),a("BlueAlien",g)}}}),System.register("client/game/mobs/dog.js",["./mob"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Mob}],execute:function(){a("Dog",g=function(a){function b(e,f,g,h){c(this,b);var i=d(this,a.call(this,e,"dog",f,g,h));return i.sprite=a.prototype.getSprite.call(i),i.game=f,i.speed=10+5*Math.random(),i.hp=50,i.nextAttack=1e3,i.attackRate=2e3,i.weaponSprite="red_shot3",i}return e(b,a),b.prototype.move=function(){a.prototype.move.call(this)},b.prototype.attack=function(){a.prototype.attack.call(this)},b.prototype.weaponHit=function(b,c){a.prototype.weaponHit.call(this,b,c)},b.prototype.enemyHitByWeapon=function(b,c){a.prototype.enemyHitByWeapon.call(this,b,c)},b}(f)),a("Dog",g)}}}),System.register("client/game/mobs/furryalien2.js",["./mob"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Mob}],execute:function(){a("FurryAlien2",g=function(a){function b(e,f,g,h){c(this,b);var i=d(this,a.call(this,e,"furry_alien2",f,g,h));return i.sprite=a.prototype.getSprite.call(i),i.game=f,i.speed+=5*Math.random(),i.hp=40,i.nextAttack=1e3,i.attackRate=200+1e3*Math.random(),i}return e(b,a),b.prototype.move=function(){a.prototype.move.call(this)},b.prototype.attack=function(){a.prototype.attack.call(this)},b.prototype.weaponHit=function(b,c){a.prototype.weaponHit.call(this,b,c)},b.prototype.enemyHitByWeapon=function(b,c){a.prototype.enemyHitByWeapon.call(this,b,c)},b}(f)),a("FurryAlien2",g)}}}),System.register("client/game/mobs/grayrobot.js",["./mob"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Mob}],execute:function(){a("GrayRobot",g=function(a){function b(e,f,g,h){c(this,b);var i=d(this,a.call(this,e,"grayrobot",f,g,h));return i.sprite=a.prototype.getSprite.call(i),i.game=f,i.speed+=5*Math.random(),i.hp=40,i.nextAttack=1e3,i.attackRate=200+1e3*Math.random(),i}return e(b,a),b.prototype.move=function(){a.prototype.move.call(this)},b.prototype.attack=function(){a.prototype.attack.call(this)},b.prototype.weaponHit=function(b,c){a.prototype.weaponHit.call(this,b,c)},b.prototype.enemyHitByWeapon=function(b,c){a.prototype.enemyHitByWeapon.call(this,b,c)},b}(f)),a("GrayRobot",g)}}}),System.register("client/game/mobs/greenalien3.js",["./mob"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Mob}],execute:function(){a("GreenAlien3",g=function(a){function b(e,f,g,h){c(this,b);var i=d(this,a.call(this,e,"green_alien3",f,g,h));return i.sprite=a.prototype.getSprite.call(i),i.game=f,i.speed+=5*Math.random(),i.hp=40,i.nextAttack=1e3,i.attackRate=200+1e3*Math.random(),i}return e(b,a),b.prototype.move=function(){a.prototype.move.call(this)},b.prototype.attack=function(){a.prototype.attack.call(this)},b.prototype.weaponHit=function(b,c){a.prototype.weaponHit.call(this,b,c)},b.prototype.enemyHitByWeapon=function(b,c){a.prototype.enemyHitByWeapon.call(this,b,c)},b}(f)),a("GreenAlien3",g)}}}),System.register("client/game/mobs/greenchecker.js",["./mob"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Mob}],execute:function(){a("GreenChecker",g=function(a){function b(e,f,g,h){c(this,b);var i=d(this,a.call(this,e,"greenchecker",f,g,h));return i.sprite=a.prototype.getSprite.call(i),i.game=f,i.speed+=5*Math.random(),i.hp=40,i.nextAttack=1e3,i.attackRate=200+1e3*Math.random(),i}return e(b,a),b.prototype.move=function(){a.prototype.move.call(this)},b.prototype.attack=function(){a.prototype.attack.call(this)},b.prototype.weaponHit=function(b,c){a.prototype.weaponHit.call(this,b,c)},b.prototype.enemyHitByWeapon=function(b,c){a.prototype.enemyHitByWeapon.call(this,b,c)},b}(f)),a("GreenChecker",g)}}}),System.register("client/game/mobs/greententacle.js",["./mob"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Mob}],execute:function(){a("GreenTentacle",g=function(a){function b(e,f,g,h){c(this,b);var i=d(this,a.call(this,e,"greententacle",f,g,h));return i.sprite=a.prototype.getSprite.call(i),i.game=f,i.speed+=5*Math.random(),i.hp=40,i.nextAttack=1e3,i.attackRate=200+1e3*Math.random(),i}return e(b,a),b.prototype.move=function(){a.prototype.move.call(this)},b.prototype.attack=function(){a.prototype.attack.call(this)},b.prototype.weaponHit=function(b,c){a.prototype.weaponHit.call(this,b,c)},b.prototype.enemyHitByWeapon=function(b,c){a.prototype.enemyHitByWeapon.call(this,b,c)},b}(f)),a("GreenTentacle",g)}}}),System.register("client/game/mobs/mindflayer.js",["./mob"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Mob}],execute:function(){a("Mindflayer",g=function(a){function b(e,f,g,h){c(this,b);var i=d(this,a.call(this,e,"mindflayer",f,g,h));return i.sprite=a.prototype.getSprite.call(i),i.game=f,i.speed+=5*Math.random(),i.hp=40,i.nextAttack=1e3,i.attackRate=200+1e3*Math.random(),i}return e(b,a),b.prototype.move=function(){a.prototype.move.call(this)},b.prototype.attack=function(){a.prototype.attack.call(this)},b.prototype.weaponHit=function(b,c){a.prototype.weaponHit.call(this,b,c)},b.prototype.enemyHitByWeapon=function(b,c){a.prototype.enemyHitByWeapon.call(this,b,c)},b}(f)),a("Mindflayer",g)}}}),System.register("client/game/mobs/mobfactory.js",["phaser"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e;return{setters:[function(a){d=a["default"]}],execute:function(){a("MobFactory",e=function(){function a(b){c(this,a),this.game=b}return a.prototype.generate=function(a,b,c){for(var d=0;1>d;d++){var e=this.getRandomStart();new(e[0],e[1]);a.eyes.push(eye)}},a.prototype.getRandomStart=function(){var a=Math.random()*(game.width-200)+100,b=Math.random()*(game.height-200)+100;return[a,b]},a}()),a("MobFactory",e)}}}),System.register("client/game/mobs/plasmoid.js",["./mob"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Mob}],execute:function(){a("Plasmoid",g=function(a){function b(e,f,g,h){c(this,b);var i=d(this,a.call(this,e,"plasmoid",f,g,h));return i.sprite=a.prototype.getSprite.call(i),i.game=f,i.speed+=5*Math.random(),i.hp=40,i.nextAttack=1e3,i.attackRate=200+1e3*Math.random(),i}return e(b,a),b.prototype.move=function(){a.prototype.move.call(this)},b.prototype.attack=function(){a.prototype.attack.call(this)},b.prototype.weaponHit=function(b,c){a.prototype.weaponHit.call(this,b,c)},b.prototype.enemyHitByWeapon=function(b,c){a.prototype.enemyHitByWeapon.call(this,b,c)},b}(f)),a("Plasmoid",g)}}}),System.register("client/game/mobs/psionicist.js",["./mob"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Mob}],execute:function(){a("Psionicist",g=function(a){function b(e,f,g,h){c(this,b);var i=d(this,a.call(this,e,"psionicist",f,g,h));return i.sprite=a.prototype.getSprite.call(i),i.game=f,i.speed+=5*Math.random(),i.hp=40,i.nextAttack=1e3,i.attackRate=200+1e3*Math.random(),i}return e(b,a),b.prototype.move=function(){a.prototype.move.call(this)},b.prototype.attack=function(){a.prototype.attack.call(this)},b.prototype.weaponHit=function(b,c){a.prototype.weaponHit.call(this,b,c)},b.prototype.enemyHitByWeapon=function(b,c){a.prototype.enemyHitByWeapon.call(this,b,c)},b}(f)),a("Psionicist",g)}}}),System.register("client/game/mobs/snake.js",["./mob"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Mob}],execute:function(){a("Snake",g=function(a){function b(e,f,g,h){c(this,b);var i=d(this,a.call(this,e,"snake",f,g,h));return i.sprite=a.prototype.getSprite.call(i),i.game=f,i.speed+=5*Math.random(),i.hp=40,i.nextAttack=1e3,i.attackRate=200+1e3*Math.random(),i}return e(b,a),b.prototype.move=function(){a.prototype.move.call(this)},b.prototype.attack=function(){a.prototype.attack.call(this)},b.prototype.weaponHit=function(b,c){a.prototype.weaponHit.call(this,b,c)},b.prototype.enemyHitByWeapon=function(b,c){a.prototype.enemyHitByWeapon.call(this,b,c)},b}(f)),a("Snake",g)}}}),System.register("client/game/mobs/whitealien.js",["./mob"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Mob}],execute:function(){a("WhiteAlien",g=function(a){function b(e,f,g,h){c(this,b);var i=d(this,a.call(this,e,"white_alien",f,g,h));return i.sprite=a.prototype.getSprite.call(i),i.game=f,i.speed+=5*Math.random(),i.hp=40,i.nextAttack=1e3,i.attackRate=200+1e3*Math.random(),i}return e(b,a),b.prototype.move=function(){a.prototype.move.call(this)},b.prototype.attack=function(){a.prototype.attack.call(this)},b.prototype.weaponHit=function(b,c){a.prototype.weaponHit.call(this,b,c)},b.prototype.enemyHitByWeapon=function(b,c){a.prototype.enemyHitByWeapon.call(this,b,c)},b}(f)),a("WhiteAlien",g)}}}),System.register("client/game/mobs/yellowrobot.js",["./mob"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Mob}],execute:function(){a("YellowRobot",g=function(a){function b(e,f,g,h){c(this,b);var i=d(this,a.call(this,e,"yellowrobot",f,g,h));return i.sprite=a.prototype.getSprite.call(i),i.game=f,i.speed+=5*Math.random(),i.hp=40,i.nextAttack=1e3,i.attackRate=200+1e3*Math.random(),i}return e(b,a),b.prototype.move=function(){a.prototype.move.call(this)},b.prototype.attack=function(){a.prototype.attack.call(this)},b.prototype.weaponHit=function(b,c){a.prototype.weaponHit.call(this,b,c)},b.prototype.enemyHitByWeapon=function(b,c){a.prototype.enemyHitByWeapon.call(this,b,c)},b}(f)),a("YellowRobot",g)}}}),System.register("client/game/mobs/zombie.js",["./mob"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Mob}],execute:function(){a("Zombie",g=function(a){function b(e,f,g,h){c(this,b);var i=d(this,a.call(this,e,"zombie",f,g,h));return i.sprite=a.prototype.getSprite.call(i),i.game=f,i.speed+=5*Math.random(),i.hp=40,i.nextAttack=1e3,i.attackRate=200+1e3*Math.random(),i}return e(b,a),b.prototype.move=function(){a.prototype.move.call(this)},b.prototype.attack=function(){a.prototype.attack.call(this)},b.prototype.weaponHit=function(b,c){a.prototype.weaponHit.call(this,b,c)},b.prototype.enemyHitByWeapon=function(b,c){a.prototype.enemyHitByWeapon.call(this,b,c)},b}(f)),a("Zombie",g)}}}),System.register("client/game/player/ammo.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("Ammo",d=function b(){c(this,b),this.addAmmoTypes()}),a("Ammo",d)}}}),System.register("client/game/player/consumables.js",["./item"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h,i;return{setters:[function(a){f=a.Item}],execute:function(){a("Consumable",g=function(a){function b(e,f,g,h){return c(this,b),d(this,a.call(this,e,f,g,h,"consumable"))}return e(b,a),b}(f)),a("Consumable",g),a("Medkit",h=function(a){function b(e){return c(this,b),d(this,a.call(this,e,1,1,25))}return e(b,a),b.prototype.buy=function(a){return a.credits<this.cost?(a.writeconsole("You do not have enough credits."),!1):a.medkits>=a.medkitMax?(a.writeconsole("You cannot carry another medical kit."),!1):(a.addCredits(-this.cost),a.addMedkits(1),!0)},b}(g)),a("Medkit",h),a("Grenade",i=function(a){function b(e){return c(this,b),d(this,a.call(this,e,1,1,5))}return e(b,a),b.prototype.buy=function(a){return a.credits<this.cost?(a.writeconsole("You do not have enough credits."),!1):a.medkits>=20?(a.writeconsole("You cannot carry another grenade."),!1):(a.addCredits(-this.cost),a.addGrenades(1),!0)},b}(g)),a("Grenade",i)}}}),System.register("client/game/player/item.js",[],function(a,b){"use strict";function c(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function d(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;return{setters:[],execute:function(){a("Item",f=function b(a,c,d,f,g){e(this,b),this.name=a,this.durability=c,this.quality=d,this.cost=f,this.itemType=g}),a("Item",f),a("Consumable",g=function(a){function b(d,f,g,h,i){return e(this,b),c(this,a.call(this,d,f,g,h,i))}return d(b,a),b}(f)),a("Consumable",g),a("Medkit",h=function(a){function b(d){return e(this,b),c(this,a.call(this,d,100,1,10,"medkit"))}return d(b,a),b.prototype.buy=function(a){return a.attributes.credits<this.cost?(a.writeconsole("You do not have enough credits."),!1):a.items.medkits.quantity>=a.items.medkits.carryMax?(a.writeconsole("You cannot carry another kit."),!1):(a.addCredits(-this.cost),a.addMedkits(1),!0)},b}(g)),a("Medkit",h),a("Grenade",i=function(a){function b(d){return e(this,b),c(this,a.call(this,d,100,1,10,"grenade"));
}return d(b,a),b.prototype.buy=function(a){return a.attributes.credits<this.cost?(a.writeconsole("You do not have enough credits."),!1):a.items.grenades.quantity>=a.items.grenades.carryMax?(a.writeconsole("You cannot carry another grenade."),!1):(a.addCredits(-this.cost),a.addMedkits(1),!0)},b}(g)),a("Grenade",i),a("Weapon",j=function(a){function b(d,f,g,h,i){return e(this,b),c(this,a.call(this,d,f,g,h,i))}return d(b,a),b}(f)),a("Weapon",j),a("Pistol",k=function(a){function b(d){return e(this,b),c(this,a.call(this,d,100,1,100,"pistol"))}return d(b,a),b}(j)),a("Pistol",k),a("LaserPistol",l=function(a){function b(d){return e(this,b),c(this,a.call(this,d,100,1,100,"laserpistol"))}return d(b,a),b.prototype.buy=function(a){return a.hasLaserPistol?(a.writeconsole("already have a laser pistol"),!1):a.attributes.credits<this.cost?(a.writeconsole("not enough credits"),!1):(a.addCredits(-this.cost),a.addLaserPistol(),a.writeconsole("laser pistol equipped on 2."),!0)},b}(j)),a("LaserPistol",l),a("AssaultRifle",m=function(a){function b(d){return e(this,b),c(this,a.call(this,d,100,1,100,"assaultrifle"))}return d(b,a),b.prototype.buy=function(a){return a.hasAssaultRifle?(a.writeconsole("already have an assault rifle"),!1):a.attributes.credits<this.cost?(a.writeconsole("not enough credits"),!1):(a.addCredits(-this.cost),a.addAssaultRifle(),a.writeconsole("assault rifle equipped on 4."),!0)},b}(j)),a("AssaultRifle",m),a("Shotgun",n=function(a){function b(d){return e(this,b),c(this,a.call(this,d,50,1,100,"shotgun"))}return d(b,a),b.prototype.buy=function(a){return a.hasShotgun?(a.writeconsole("already have a shotgun"),!1):a.attributes.credits<this.cost?(a.writeconsole("not enough credits"),!1):(a.addCredits(-this.cost),a.addShotgun(),a.writeconsole("shotgun equipped on 5."),!0)},b}(j)),a("Shotgun",n),a("RocketLauncher",o=function(a){function b(d){return e(this,b),c(this,a.call(this,d,100,1,150,"rocketlauncher"))}return d(b,a),b.prototype.buy=function(a){return a.hasRocketLauncher?(a.writeconsole("already have a rocket launcher"),!1):a.attributes.credits<this.cost?(a.writeconsole("not enough credits"),!1):(a.addCredits(-this.cost),a.addRocketLauncher(),a.writeconsole("rocket launcher equipped on 3."),!0)},b}(j)),a("RocketLauncher",o),a("Ammo",p=function(a){function b(d,f,g,h){e(this,b);var i=c(this,a.call(this,d,-1,-1,h,"ammo"));return i.quantity=g,i.ammotype=f,i}return d(b,a),b}(f)),a("Ammo",p),a("LowCaliburRounds",q=function(a){function b(d){return e(this,b),c(this,a.call(this,d,"standard",6,5))}return d(b,a),b.prototype.buy=function(a){return a.attributes.credits>this.cost?(a.addCredits(-this.cost),a.addAmmo(this.quantity),!0):!1},b}(p)),a("LowCaliburRounds",q),a("HighCaliburRounds",r=function(a){function b(d){return e(this,b),c(this,a.call(this,d,"standard",30,15))}return d(b,a),b.prototype.buy=function(a){return a.attributes.credits>this.cost?(a.addCredits(-this.cost),a.addHighCaliburAmmo(this.quantity),!0):!1},b}(p)),a("HighCaliburRounds",r),a("Rockets",s=function(a){function b(d){return e(this,b),c(this,a.call(this,d,"rockets",3,12))}return d(b,a),b.prototype.buy=function(a){return a.attributes.credits>this.cost?(a.addCredits(-this.cost),a.addRockets(this.quantity),!0):!1},b}(p)),a("Rockets",s),a("Shells",t=function(a){function b(d){return e(this,b),c(this,a.call(this,d,"shells",7,20))}return d(b,a),b.prototype.buy=function(a){return a.attributes.credits>this.cost?(a.addCredits(-this.cost),a.addShells(this.quantity),!0):!1},b}(p)),a("Shells",t)}}}),System.register("client/game/player/weapons.js",["./item"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h,i,j,k,l;return{setters:[function(a){f=a.Item}],execute:function(){a("Weapon",g=function(a){function b(e,f,g,h,i){return c(this,b),d(this,a.call(this,e,f,g,h,i))}return e(b,a),b}(f)),a("Weapon",g),a("Pistol",h=function(a){function b(e){return c(this,b),d(this,a.call(this,e,100,1,100,"pistol"))}return e(b,a),b}(g)),a("Pistol",h),a("LaserPistol",i=function(a){function b(e){return c(this,b),d(this,a.call(this,e,100,1,100,"laserpistol"))}return e(b,a),b.prototype.buy=function(a){return a.credits>=this.cost&&!a.hasLaserPistol?(a.addCredits(-this.cost),a.addLaserPistol(),a.writeconsole("laser pistol equipped on 2."),!0):void a.writeconsole("invalid purchase")},b}(g)),a("LaserPistol",i),a("AssaultRifle",j=function(a){function b(e){return c(this,b),d(this,a.call(this,e,100,1,100,"assaultrifle"))}return e(b,a),b.prototype.buy=function(a){return a.credits>=this.cost&&!a.hasAssaultRifle?(a.addCredits(-this.cost),a.addAssaultRifle(),a.writeconsole("assault rifle equipped on 4."),!0):void a.writeconsole("invalid purchase")},b}(g)),a("AssaultRifle",j),a("Shotgun",k=function(a){function b(e){return c(this,b),d(this,a.call(this,e,50,1,100,"shotgun"))}return e(b,a),b.prototype.buy=function(a){return a.credits>=this.cost&&!a.hasShotgun?(a.addCredits(-this.cost),a.addShotgun(),a.writeconsole("shotgun equipped on 5."),!0):void a.writeconsole("invalid purchase")},b}(g)),a("Shotgun",k),a("RocketLauncher",l=function(a){function b(e){return c(this,b),d(this,a.call(this,e,100,1,150,"rocketlauncher"))}return e(b,a),b.prototype.buy=function(a){return a.credits>=this.cost&&!a.hasRocketLauncher?(a.addCredits(-this.cost),a.addRocketLauncher(),a.writeconsole("rocket launcher equipped on 3."),!0):void a.writeconsole("invalid purchase")},b}(g)),a("RocketLauncher",l)}}}),function(){var a=System.amdDefine;a("damphamlet.html!github:systemjs/plugin-text@0.0.3.js",[],function(){return'<template> <section class="au-animate"> <body class="game-body"> <div id="content"></div> <head> <link href="https://fonts.googleapis.com/css?family=Orbitron" rel="stylesheet"> <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"> <meta charset="UTF-8"> <title>Nerd in space</title> <link rel="stylesheet" href="../static/sass/main.css"> </head> <div class="mainWindow centered"> <div class="sidebar-left"> <div class="sidebar-padding"> <span class="Name">${phasergame.playerone.playername}</span> </div> <div class="sidebar-padding"> <i class="fa fa-heart"></i> <span>${phasergame.playerone.attributes.health.current}</span> <span> / </span> <span>${phasergame.playerone.attributes.health.max}</span> </div> <div class="sidebar-padding"> <i class="fa fa-bolt"></i> <span>${phasergame.playerone.attributes.stamina.current}</span> <span> / </span> <span>${phasergame.playerone.attributes.stamina.max}</span> </div> <div class="sidebar-padding"> <i class="fa fa-eye"></i> <span>${phasergame.playerone.attributes.energy.current}</span> <span> /</span> <span>${phasergame.playerone.attributes.energy.max}</span> </div> <div class="sidebar-padding"> <i class="fa fa-crosshairs"></i> <span>${phasergame.playerone.weapon.clip}</span> <span> / </span> <span>${phasergame.playerone.weapon.ammo}</span> </div> <div class="consumables"> <div class="sidebar-padding"> <i class="fa fa-bomb"></i> <span>${phasergame.playerone.inventory.items.grenades.quantity}</span> </div> <div class="sidebar-padding"> <i class="fa fa-medkit"></i> <span>${phasergame.playerone.inventory.items.medkits.quantity}</span> </div> </div> <div class="sidebar-padding"> <i class="fa fa-paw"></i> <span>${phasergame.target.health}</span> <span> / </span> <span>${phasergame.enemyCount}</span> </div> </div> <div class="top-nav"> <div class="top-nav-items"> <span class="UIIcons"> <img src="../static/assets/UI/ProfileIcon.png" class="profileIcon" click.trigger="clickProfile()"> <img src="../static/assets/UI/AttributesIcon.png" class="attributesIcon" click.trigger="clickAttributes()"> <img src="../static/assets/UI/GunIcon.png" class="weaponsIcon" click.trigger="clickWeapons()"> <img src="../static/assets/UI/GrenadeIcon.png" class="grenadeIcon" click.trigger="clickGrenade()"> <img src="../static/assets/UI/InfoIcon.png" class="instructionsIcon" click.trigger="clickInstructions()"> </span> </div> </div> <div class="top-spacer"></div> <div class="gamePanel"> <div id="gameWindow"></div> </div> <div class="bottom-nav"> <ul class="console"></ul> </div> </div> </body> <footer> <compose view-model="./menu/create"></compose> <compose view-model="./menu/profile"></compose> <compose view-model="./menu/talents"></compose> <compose view-model="./menu/weapons"></compose> <compose view-model="./menu/explosives"></compose> <compose view-model="./menu/shopmenu"></compose> <compose view-model="./menu/instructions"></compose> </footer> </section> </template>'})}(),System.register("sharedstate.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("SharedState",d=function b(){c(this,b),this.health=0}),a("SharedState",d)}}}),System.register("damphamlet.js",["../build/scripts/phaser.js","jquery","lodash","./states/GameState","./states/base","./states/Level1","./states/Level2","./states/Level3","./client/game/player/marine/marine","./client/game/player/psiops/psiops","./client/game/player/splicer/splicer","aurelia-framework","./sharedstate"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;return{setters:[function(a){},function(a){d=a["default"]},function(a){e=a["default"]},function(a){f=a["default"]},function(a){g=a["default"]},function(a){h=a["default"]},function(a){i=a["default"]},function(a){j=a["default"]},function(a){k=a.Marine},function(a){l=a.PsiOps},function(a){m=a.Splicer},function(a){n=a.inject},function(a){o=a.SharedState}],execute:function(){a("DampHamlet",(p=n(o),r=p(q=function(){function a(b){c(this,a),this.sharedstate=b,console.log("game constructor: "+this.id),this.gender="Male",this.playerClass="Marine",this.gameWidth=800,this.gameHeight=600,this.initialize(),window.damphamlet=this}return a.prototype.attached=function(){this.initialize(),this.sharedstate.health+=1},a.prototype.canDeactivate=function(){return confirm("This will terminate your current game. Are you sure you want to leave?")},a.prototype.initialize=function(){this.profileDialog=document.getElementById("Profile"),this.instructionsDialog=document.getElementById("Instructions"),this.talentDialog=document.getElementById("Talents"),this.weaponsDialog=document.getElementById("Weapons"),this.explosivesDialog=document.getElementById("Explosives"),this.shopDialog=document.getElementById("Shop"),this.createDialog=document.getElementById("Create"),this.openDialog=this.createDialog,this.clickHandler()},a.prototype.clickHandler=function(){window.onkeydown=function(a){27===a.keyCode&&(null!=damphamlet.openDialog?(damphamlet.openDialog.close(),damphamlet.openDialog=null):(damphamlet.instructionsDialog.show(),damphamlet.openDialog=damphamlet.instructionsDialog))}},a.prototype.startGame=function(){this.phasergame.state.start("GameState")},a.prototype.getRandomPosition=function(a){return[Math.random()*(a.width*this.scalemultiple*8),Math.random()*(a.height*this.scalemultiple*8)]},a.prototype.createNewPlayer=function(a){var b="",c=this.phasergame;switch(a["class"]){case"Marine":b=new k(c,a);break;case"Psi Ops":b=new l(c,a);break;case"Splicer":b=new m(c,a)}return c.playerone=b,b},a.prototype.loadPlayer=function(a){var b="",c=this.phasergame;switch(c.playerObj.classInfo.name){case"Marine":b=new k(c,a,c.playerObj);break;case"Psi Ops":b=new l(c,a,c.playerObj);break;case"Splicer":b=new m(c,a,c.playerObj)}return c.playerone=b,b},a.prototype.preload=function(){this.phasergame.load.image("logo","../build/phaser.png")},a.prototype.create=function(){var a=this.phasergame,b=a.add.sprite(a.world.centerX,a.world.centerY,"logo");b.anchor.setTo(.5,.5)},a.prototype.clickProfile=function(){console.log("click in game"),null!=this.openDialog&&this.openDialog.hasAttribute("open")&&this.openDialog.close(),this.profileDialog.show(),this.openDialog=this.profileDialog},a.prototype.clickAttributes=function(){null!=this.openDialog&&this.openDialog.hasAttribute("open")&&this.openDialog.close(),this.talentDialog.show(),this.openDialog=this.talentDialog},a.prototype.clickWeapons=function(){null!=this.openDialog&&this.openDialog.hasAttribute("open")&&this.openDialog.close(),this.weaponsDialog.show(),this.openDialog=this.weaponsDialog},a.prototype.clickGrenade=function(){null!=this.openDialog&&this.openDialog.hasAttribute("open")&&this.openDialog.close(),this.explosivesDialog.show(),this.openDialog=this.explosivesDialog},a.prototype.clickInstructions=function(){null!=this.openDialog&&this.openDialog.hasAttribute("open")&&this.openDialog.close(),this.instructionsDialog.show(),this.openDialog=this.instructionsDialog},a.prototype.openShop=function(a){null!=this.openDialog&&this.openDialog.hasAttribute("open")&&this.openDialog.close(),this.shopDialog.show(),this.openDialog=this.shopDialog},a.prototype.clickGender=function(a){this.gender=a.target.getAttribute("gender"),d(a.target).siblings().css("border","0.25em aliceblue ridge"),d(a.target).css("border","0.25em gold ridge")},a.prototype.clickClass=function(a){var b=a.target.getAttribute("type");this.playerClass=b,d(a.target).siblings().css("border","0.25em aliceblue ridge"),d(a.target).css("border","0.25em gold ridge"),"Mutant"!=this.playerClass&&"Cyborg"!=this.playerClass||(d(".console").append("<li> "+playerClass+" is coming soon.</li>"),this.playerClass="Marine")},a.prototype.closeMenu=function(){console.log("close menu in damphamlet"),null!=this.openDialog&&this.openDialog.hasAttribute("open")&&this.openDialog.close()},a.prototype.play=function(){console.log("play"),this.phasergame=new Phaser.Game(800,600,Phaser.AUTO,"gameWindow",null);var a="../static/assets/";this.phasergame.assetpath="../static/assets/",this.phasergame.itempath=a+"items/",this.phasergame.characterpath=a+"characters/",this.phasergame.enemypath=a+"enemies/",this.phasergame.bosspath=a+"Sliced/Bosses/",this.phasergame.fxpath=a+"Sliced/fx_32x32/",this.phasergame.soundpath=a+"sounds/",this.phasergame.hurtpath=a+"sounds/hurt/",this.phasergame.ambiencepath=a+"sounds/ambience/",this.phasergame.fabricpath=a+"sounds/fabric/",this.phasergame.footpath=a+"sounds/footsteps/",this.phasergame.state.add("GameState",f,!1),this.phasergame.state.add("Base",g,!1),this.phasergame.state.add("Level1",h,!1),this.phasergame.state.add("Level2",i,!1),this.phasergame.state.add("Level3",j,!1),this.phasergame.state.start("GameState"),this.phasergame.target={name:"",health:0},this.closeMenu(),d(".gamePanel").show()},a}())||q)),a("DampHamlet",r)}}}),function(){var a=System.amdDefine;a("game.html!github:systemjs/plugin-text@0.0.3.js",[],function(){return'<template> <section class="au-animate"> <body class="game-body"> <div id="content"></div> <head> <link href="https://fonts.googleapis.com/css?family=Orbitron" rel="stylesheet"> <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"> <meta charset="UTF-8"> <title>Nerd in space</title> <link rel="stylesheet" href="../static/sass/main.css"> </head> <div class="mainWindow centered"> <div class="sidebar-left"> <div class="sidebar-padding"> <span class="Name">Name</span> </div> <div class="sidebar-padding"> <i class="fa fa-heart"></i> <span class="health">0</span> <span> / </span> <span class="maxHealth">0</span> </div> <div class="sidebar-padding"> <i class="fa fa-bolt"></i> <span class="stamina">0</span> <span> / </span> <span class="staminaMax">0</span> </div> <div class="sidebar-padding"> <i class="fa fa-eye"></i> <span class="energy">0</span> <span> /</span> <span class="energyMax">0</span> </div> <div class="sidebar-padding"> <i class="fa fa-crosshairs"></i> <span class="clip">0</span> <span> / </span> <span class="ammo">0</span> </div> <div class="consumables"> <div class="sidebar-padding"> <i class="fa fa-bomb"></i> <span class="grenades">0</span> </div> <div class="sidebar-padding"> <i class="fa fa-medkit"></i> <span class="medkits">0</span> </div> </div> <div class="sidebar-padding"> <i class="fa fa-paw"></i> <span class="enemyHealth">--</span> <span> / </span> <span class="enemyCount"></span> </div> </div> <div class="top-nav"> <div class="top-nav-items"> <span class="UIIcons"> <img src="../static/assets/UI/ProfileIcon.png" class="profileIcon" click.trigger="clickProfile()"> <img src="../static/assets/UI/AttributesIcon.png" class="attributesIcon" click.trigger="clickAttributes()"> <img src="../static/assets/UI/GunIcon.png" class="weaponsIcon" click.trigger="clickWeapons()"> <img src="../static/assets/UI/GrenadeIcon.png" class="grenadeIcon" click.trigger="clickGrenade()"> <img src="../static/assets/UI/InfoIcon.png" class="instructionsIcon" click.trigger="clickInstructions()"> </span> </div> </div> <div class="top-spacer"></div> <div class="gamePanel"> <div id="gameWindow"></div> </div> </div> </body> <footer> <compose view-model="./menu/create"></compose> <compose view-model="./menu/profile"></compose> <compose view-model="./menu/talents"></compose> <compose view-model="./menu/weapons"></compose> <compose view-model="./menu/explosives"></compose> <compose view-model="./menu/shop"></compose> <compose view-model="./menu/instructions"></compose> </footer> </section> </template>'})}(),System.register("index.js",["./states/GameState","./states/base","./states/Level1","./states/Level2","./states/Level3","./client/game/player/marine/marine","./client/game/player/psiops/psiops","./client/game/player/splicer/splicer","jquery","lodash","phaser"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h,i,j,k,l,m,n,o,p,q;return{setters:[function(a){f=a["default"]},function(a){g=a["default"]},function(a){h=a["default"]},function(a){i=a["default"]},function(a){j=a["default"]},function(a){k=a.Marine},function(a){l=a.PsiOps},function(a){m=a.Splicer},function(a){n=a["default"]},function(a){o=a["default"]},function(a){p=a["default"]}],execute:function(){new(q=function(a){function b(){c(this,b);var e=d(this,a.call(this,800,600,p.AUTO,"gameWindow",null));return e.itempath="/assets/items/",e.characterpath="/assets/characters/",e.enemypath="/assets/enemies/",e.assetpath="/assets/",e.gameWidth=800,e.gameHeight=600,e.state.add("GameState",f,!1),e.state.add("Base",g,!1),e.state.add("Level1",h,!1),e.state.add("Level2",i,!1),e.state.add("Level3",j,!1),e.map,window.game=e,e.game=e,console.log("before play button"),e}return e(b,a),b.prototype.startGame=function(){this.state.start("GameState")},b.prototype.getRandomPosition=function(a){return[Math.random()*(a.width*this.scalemultiple*8),Math.random()*(a.height*this.scalemultiple*8)]},b.prototype.createNewPlayer=function(a){var b="";switch(a["class"]){case"Marine":b=new k(this,a);break;case"Psi Ops":b=new l(this,a);break;case"Splicer":b=new m(this,a)}return b},b.prototype.loadPlayer=function(a){var b="";switch(this.playerObj.classInfo.name){case"Marine":b=new k(this,a,this.playerObj);break;case"Psi Ops":b=new l(this,a,this.playerObj);break;case"Splicer":b=new m(this,a,this.playerObj)}return b},b}(p.Game))}}}),System.register("main.js",["bootstrap"],function(a,b){"use strict";return{setters:[function(a){}],execute:function(){function b(a){a.use.standardConfiguration().developmentLogging(),a.start().then(function(){return a.setRoot()})}a("configure",b)}}}),function(){var a=System.amdDefine;a("menu/create.html!github:systemjs/plugin-text@0.0.3.js",[],function(){return'<template> <dialog id="Create" open> <div class="center"> <span class="CreationText">Choose your Nerd</span> </div> <div class="center"> <input placeholder="Name" class="inputName"> </div> <div class="center"> <img class="profileImg" src="../static/assets/characters/Nerd.png" gender="male" click.trigger="clickGender($event)"> <img class="profileImg" src="./static/assets/characters/femalenerd.png" gender="female" click.trigger="clickGender($event)"> </div> <div class="center"> <ul> <li class="classes" type="Marine" click.trigger="clickClass($event)">Marine</li> <li class="classes" type="Psi Ops" click.trigger="clickClass($event)">Psi Ops</li> </ul> </div> <div class="center"> <button click.trigger="play()">Play</button> </div> </dialog> </template>'})}(),System.register("menu/create.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("Create",d=function b(){c(this,b)}),a("Create",d)}}}),function(){var a=System.amdDefine;a("menu/explosives.html!github:systemjs/plugin-text@0.0.3.js",[],function(){return'<template> <dialog id="Explosives"> <div> <span class="ExplosivesText">Explosives</span> <img src="../static/assets/UI/XIcon.png" class="closeExplosives" click.trigger="closeMenu()"> </div> <div class="left"> <div> </div> </div> <div class="right"> </div> </dialog> </template>'})}(),System.register("menu/explosives.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("Explosives",d=function b(){c(this,b)}),a("Explosives",d)}}}),function(){var a=System.amdDefine;a("menu/instructions.html!github:systemjs/plugin-text@0.0.3.js",[],function(){return'<template> <dialog id="Instructions"> <div> <span>Instructions</span> <img src="../static/assets/UI/XIcon.png" class="closeInstructions" click.trigger="closeMenu()"> </div> <div class="left"> <p>W : Move up</p> <p>A : Move left</p> <p>S : Move down</p> <p>D : Move right</p> <p>E : Interact</p> <p>N : Open Talents</p> <p>P : Open Profile</p> <p>F12: Teleport to base</p> <p>Shift: Sprint</p> </div> <div class="right"> <p>1 : Pistol</p> <p>2 : Laser</p> <p>3 : Rocket Launcher</p> <p>4 : Assault Rifle</p> <p>5 : Shotgun</p> <p>G : Grenade</p> <p>R : Reload</p> <p>H : Use Medkit</p> </div> <div class="bottom"> <div>Interact with the shop, medical station, and teleporter in your base.</div> <div>View your profile, talents, and weapon info in the top right.</div> <div>Press Esc to open this panel or close any menu.</div> </div> </dialog> </template>'})}(),System.register("menu/instructions.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("Instructions",d=function b(){c(this,b)}),a("Instructions",d)}}}),function(){var a=System.amdDefine;a("menu/profile.html!github:systemjs/plugin-text@0.0.3.js",[],function(){return'<template> <dialog id="Profile"> <div> <span class="ProfileText">${phasergame.playerone.playername}</span> <img src="../static/assets/UI/XIcon.png" class="closeProfile" click.trigger="closeMenu()"> </div> <div class="left"> <div> <div> <label>Health: </label> <span>${phasergame.playerone.attributes.health.current}</span> <span> / </span> <span>${phasergame.playerone.attributes.health.max}</span> </div> <div> <label>Speed: </label> <span>${phasergame.playerone.attributes.speed}</span> </div> <div>Level: <span>${phasergame.playerone.attributes.level}</span></div> <div> <label>XP: </label> <span>${phasergame.playerone.attributes.xp}</span> <span> / </span> <span>${phasergame.playerone.levels.nextlevel}</span> </div> <div>Credits: <span>${phasergame.playerone.attributes.credits}</span></div> <div>Grenades: <span>${phasergame.playerone.items.grenades.quantity}</span> </div> <div>Weapon: <span>${phasergame.playerone.weapon.name}</span> </div> </div> </div> <div class="right"> <span class="imgProfile"></span> </div> </dialog> </template>'})}(),System.register("menu/profile.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("Profile",d=function b(){c(this,b)}),a("Profile",d)}}}),function(){var a=System.amdDefine;a("menu/shopmenu.html!github:systemjs/plugin-text@0.0.3.js",[],function(){return'<template> <dialog id="Shop"> <div> <span>Credits: <span value.bind="credits">${phasergame.playerone.attributes.credits}</span> </span> <span class="text">Shop</span> <img src="../static/assets/UI/XIcon.png" class="closeShop" click.delegate="closeMenu()"> </div> <div class="tabs"> <input type="radio" name="tabs" id="tab1" checked> <label for="tab1"> <i class="fa"></i><span>Items</span> </label> <input type="radio" name="tabs" id="tab2"> <label for="tab2"> <i class="fa"></i><span>Weapons</span> </label> <input type="radio" name="tabs" id="tab3"> <label for="tab3"> <i class="fa"></i><span>Armor</span> </label> <div id="tab-content1" class="tab-content"> <h2>Items</h2> <p> </p><div> <i class="fa fa-plus-square buybullets" click.delegate="buyBullets()"></i> <span>9mm rounds for ${items.LowCaliburRounds.cost} credits.</span> </div> <div> <i class="fa fa-plus-square buyHiCalRounds" click.delegate="buySlugs()"></i> <span>5.56mm rounds for ${items.HighCaliburoRounds.cost} credits.</span> </div> <div> <i class="fa fa-plus-square buyshells" click.delegate="buyShells()"></i> <span>box of shells for ${items.Shells.cost} credits.</span> </div> <div> <i class="fa fa-plus-square buygrenades" click.delegate="buyGrenades()"></i> <span>grenade for ${items.Grenade.cost} credits.</span> </div> <div> <i class="fa fa-plus-square buyrockets" click.delegate="buyRockets()"></i> <span>box of rockets for ${items.Rockets.cost} credits.</span> </div> <div> <i class="fa fa-plus-square buymedkit" click.delegate="buyMedkit()"></i> <span>medkit for ${items.Medkit.cost} credits.</span> </div> <p></p> </div> <div id="tab-content2" class="tab-content"> <h2>Weapons</h2> <p> </p><div> <i class="fa fa-plus-square buyrocketlauncher" click.delegate="buyRocketLauncher()"></i> <span>rocket launcher for ${items.RocketLauncher.cost} credits.</span> </div> <div> <i class="fa fa-plus-square buylaserpistol" click.delegate="buyLaserPistol()"></i> <span>laser pistol for ${items.LaserPistol.cost} credits.</span> </div> <div> <i class="fa fa-plus-square buyassaultrifle" click.delegate="buyAssaultRifle()"></i> <span>assault rifle for ${items.AssaultRifle.cost} credits.</span> </div> <div> <i class="fa fa-plus-square buyshotgun" click.delegate="buyShotgun()"></i> <span>shotgun for ${items.Shotgun.cost} credits.</span> </div> <p></p> </div> <div id="tab-content3" class="tab-content"> <h2>Armor</h2> <p> </p><div> <i class="fa fa-plus-square buyarmor1"></i> <span>shitty kevlar</span> <span>for 500 credits.</span> </div> <div> <i class="fa fa-plus-square buyarmor2"></i> <span>kevlar</span> <span>for 1000 credits.</span> </div> <div> <i class="fa fa-plus-square buyarmor3"></i> <span>energy shield</span> <span>for 5000 credits.</span> </div> <p></p> </div> </div> </dialog> </template>'})}(),System.register("menu/shopmenu.js",["aurelia-framework","../client/game/player/items"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f;return{setters:[function(a){d=a.inject},function(a){e=a.Items}],execute:function(){a("ShopMenu",f=function(){function a(){c(this,a),this.items=new e}return a.prototype.attached=function(){},a.prototype.setPlayer=function(a){this.player=a},a.prototype.buy=function(a,b){return a.attributes.credits>b.cost?(a.addCredits(-b.cost),b==this.items.LowCaliburRounds?a.addAmmo(b.quantity):b==this.items.HighCaliburRounds?a.addHighCaliburAmmo(b.quantity):b==this.items.Rockets?a.addRockets(b.quantity):b==this.items.Shells&&a.addShells(b.quantity),!0):(console.log("Not enough credits."),!1)},a.prototype.buyBullets=function(){var a=damphamlet.phasergame.playerone,b=this.items.LowCaliburRounds;this.buy(a,b),console.log("Purchased a clip of low calibur ammo.")},a.prototype.buySlugs=function(){var a=damphamlet.phasergame.playerone,b=this.items.HighCaliburRounds;this.buy(a,b),console.log("Purchased a clip of high calibur ammo.")},a.prototype.buyRockets=function(){var a=damphamlet.phasergame.playerone,b=this.items.Rockets;this.buy(a,b),console.log("Purchased a pack of rockets.")},a.prototype.buyShells=function(){var a=damphamlet.phasergame.playerone,b=this.items.Shells;this.buy(a,b),console.log("Purchased a box of shells.")},a.prototype.buyMedkit=function(){var a=damphamlet.phasergame.playerone,b=this.items.Medkit;return a.attributes.credits<b.cost?(a.writeconsole("You do not have enough credits."),!1):a.inventory.items.medkits.quantity>=a.inventory.items.medkits.carryMax?(a.writeconsole("You cannot carry another kit."),!1):(a.addCredits(-b.cost),a.addMedkits(1),!0)},a.prototype.buyGrenades=function(){var a=damphamlet.phasergame.playerone,b=this.items.Grenade;return a.attributes.credits<b.cost?(a.writeconsole("You do not have enough credits."),!1):a.inventory.items.grenades.quantity>=a.inventory.items.grenades.carryMax?(a.writeconsole("You cannot carry another grenade."),!1):(a.addCredits(-b.cost),a.addGrenades(1),!0)},a.prototype.buyLaserPistol=function(){var a=damphamlet.phasergame.playerone,b=this.items.LaserPistol;return a.attributes.credits>=b.cost&&!a.hasLaserPistol?(a.addCredits(-b.cost),a.addLaserPistol(),a.writeconsole("laser pistol equipped on 2."),!0):void a.writeconsole("invalid purchase")},a.prototype.buyAssaultRifle=function(){var a=damphamlet.phasergame.playerone,b=this.items.AssaultRifle;return a.attributes.credits>=b.cost&&!a.hasAssaultRifle?(a.addCredits(-b.cost),a.addAssaultRifle(),a.writeconsole("assault rifle equipped on 4."),!0):void a.writeconsole("invalid purchase")},a.prototype.buyShotgun=function(){var a=damphamlet.phasergame.playerone,b=this.items.Shotgun;return a.attributes.credits>=b.cost&&!a.hasShotgun?(a.addCredits(-b.cost),a.addShotgun(),a.writeconsole("shotgun equipped on 5."),!0):void a.writeconsole("invalid purchase")},a.prototype.buyRocketLauncher=function(){var a=damphamlet.phasergame.playerone,b=this.items.RocketLauncher;return a.attributes.credits>=b.cost&&!a.hasRocketLauncher?(a.addCredits(-b.cost),a.addRocketLauncher(),a.writeconsole("rocket launcher equipped on 3."),!0):void a.writeconsole("invalid purchase")},a}()),a("ShopMenu",f)}}}),function(){var a=System.amdDefine;a("menu/talents.html!github:systemjs/plugin-text@0.0.3.js",[],function(){return'<template> <dialog id="Talents"> <div> <div> <span>Available: </span> <span class="TalentPoints">${phasergame.playerone.skills.points.available}</span> <span class="TalentText">Talents</span> <img src="../static/assets/UI/XIcon.png" class="closeTalents" click.trigger="closeMenu()"> </div> <div class="left"> <table> <thead> <th width="50%"></th> <th width="20%"></th> <th width="20%"></th> <th width="10%"></th> </thead> <tbody> <tr> <td>Pistols</td> <td>${phasergame.playerone.skills.pistols.current}</td> <td>${phasergame.playerone.skills.pistols.max}</td> <td><i class="fa fa-plus-square skillPistols" click.trigger="raisePistolSkill()"></i></td> </tr> <tr> <td>Assault</td> <td>${phasergame.playerone.skills.assault.current}</td> <td>${phasergame.playerone.skills.assault.max}</td> <td><i class="fa fa-plus-square skillAssault" click.trigger="raiseAssaultSkill()"></i></td> </tr> <tr> <td>Explosives</td> <td>${phasergame.playerone.skills.explosives.current}</td> <td>${phasergame.playerone.skills.explosives.max}</td> <td><i class="fa fa-plus-square skillExplosives" click.trigger="raiseExplosivesSkill()"></i></td> </tr> <tr> <td>Health</td> <td>${phasergame.playerone.skills.health.current}</td> <td>${phasergame.playerone.skills.health.max}</td> <td><i class="fa fa-plus-square skillHealth" click.trigger="raiseHealthSkill()"></i></td> </tr> <tr> <td>Speed</td> <td>${phasergame.playerone.skills.speed.current}</td> <td>${phasergame.playerone.skills.speed.max}</td> <td><i class="fa fa-plus-square skillSpeed" click.trigger="raiseSpeedSkill()"></i></td> </tr> </tbody> </table> </div> </div> </dialog> </template>';
})}(),System.register("menu/talents.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("Talents",d=function(){function a(){c(this,a)}return a.prototype.raisePistolSkill=function(){var a=damphamlet.phasergame.playerone;a.levels.raisePistolSkill()},a.prototype.raiseAssaultSkill=function(){var a=damphamlet.phasergame.playerone;a.levels.raiseAssaultSkill()},a.prototype.raiseHealthSkill=function(){var a=damphamlet.phasergame.playerone;a.levels.raiseHealthSkill()},a.prototype.raiseExplosivesSkill=function(){var a=damphamlet.phasergame.playerone;a.levels.raiseExplosivesSkill()},a.prototype.raiseSpeedSkill=function(){var a=damphamlet.phasergame.playerone;a.levels.raiseSpeedSkill()},a}()),a("Talents",d)}}}),function(){var a=System.amdDefine;a("menu/weapons.html!github:systemjs/plugin-text@0.0.3.js",[],function(){return'<template> <dialog id="Weapons"> <div> <span class="centerHeader">Weapons</span> <img src="../static/assets/UI/XIcon.png" class="closeWeapons" click.trigger="closeMenu()"> </div> <div class="left"> <div> <div> <span>Weapon: </span> <span>${phasergame.playerone.weapon.name}</span> </div> <div> <span>Ammo: </span> <span>${phasergame.playerone.weapon.clip}</span> <span> / </span> <span>${phasergame.playerone.weapon.ammo}</span> </div> <div> <span>Fired: </span> <span>${phasergame.playerone.weapon.totalAttacks}</span> </div> </div> </div> <div class="right"> </div> </dialog> </template>'})}(),System.register("menu/weapons.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("Weapons",d=function b(){c(this,b)}),a("Weapons",d)}}}),function(){var a=System.amdDefine;a("nav-bar.html!github:systemjs/plugin-text@0.0.3.js",[],function(){return'<template bindable="router"> <nav class="navbar navbar-default navbar-fixed-top" role="navigation"> <div class="navbar-header"> <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#skeleton-navigation-navbar-collapse"> <span class="sr-only">Toggle Navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="#"> <i class="fa fa-home"></i> <span>${router.title}</span> </a> </div> <div class="collapse navbar-collapse" id="skeleton-navigation-navbar-collapse"> <ul class="nav navbar-nav"> <li repeat.for="row of router.navigation" class="${row.isActive ? \'active\' : \'\'}"> <a data-toggle="collapse" data-target="#skeleton-navigation-navbar-collapse.in" href.bind="row.href">${row.title}</a> </li> </ul> <ul class="nav navbar-nav navbar-right"> <li class="loader" if.bind="router.isNavigating"> <i class="fa fa-spinner fa-spin fa-2x"></i> </li> </ul> </div> </nav> </template>'})}(),System.register("old/loader.js",["jquery"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e;return{setters:[function(a){d=a["default"]}],execute:function(){a("Loader",e=function b(){c(this,b);var a=l,e="",f="Marine";window.onkeydown=function(b){27===b.keyCode&&(null!=a?(a.close(),a=null):(l.show(),a=l))};var g=document.getElementById("Profile");d(".profileIcon").click(function(){null!=a&&a.close(),g.show(),a=g}),d(".closeProfile").click(function(){g.close(),a=null});var h=document.getElementById("Talents");d(".attributesIcon").click(function(){null!=a&&a.close(),h.show(),a=h}),d(".closeTalents").click(function(){h.close(),a=null});var i=document.getElementById("Weapons");d(".weaponsIcon").click(function(){null!=a&&a.close(),i.show(),a=i}),d(".closeWeapons").click(function(){i.close(),a=null});var j=document.getElementById("Explosives");d(".grenadeIcon").click(function(){null!=a&&a.close(),j.show(),a=j}),d(".closeExplosives").click(function(){j.close(),a=null});var k=document.getElementById("Shop");d(".shopIcon").click(function(){null!=a&&a.close(),k.show(),a=k}),d(".closeShop").click(function(){k.close(),a=null});var l=document.getElementById("Instructions");d(".instructionsIcon").click(function(){null!=a&&a.close(),l.show(),a=l}),d(".closeInstructions").click(function(){l.close(),a=null}),d(".playbutton").click(function(){alert("play"),d(".creationwindow").hide(),d(".gamePanel").show(),window.game.state.start("GameState")}),d(".profileImg").click(function(){e=this.getAttribute("gender"),d(this).siblings().css("border","0.25em aliceblue ridge"),d(this).css("border","0.25em gold ridge")}),d(".classes").click(function(a){f=a.target.innerText,d(this).siblings().css("border","0.25em aliceblue ridge"),d(this).css("border","0.25em gold ridge"),"Mutant"!=f&&"Cyborg"!=f||(d(".console").append("<li> "+f+" is coming soon.</li>"),f="Marine")})}),a("Loader",e)}}}),System.register("phaser-game.js",[],function(a,b){"use strict";function c(){k.load.atlas("breakout","assets/games/breakout/breakout.png","assets/games/breakout/breakout.json"),k.load.image("starfield","assets/misc/starfield.jpg")}function d(){k.physics.startSystem(Phaser.Physics.ARCADE),k.physics.arcade.checkCollision.down=!1,u=k.add.tileSprite(0,0,800,600,"starfield"),n=k.add.group(),n.enableBody=!0,n.physicsBodyType=Phaser.Physics.ARCADE;for(var a,b=0;4>b;b++)for(var c=0;15>c;c++)a=n.create(120+36*c,100+52*b,"breakout","brick_"+(b+1)+"_1.png"),a.body.bounce.set(1),a.body.immovable=!0;m=k.add.sprite(k.world.centerX,500,"breakout","paddle_big.png"),m.anchor.setTo(.5,.5),k.physics.enable(m,Phaser.Physics.ARCADE),m.body.collideWorldBounds=!0,m.body.bounce.set(1),m.body.immovable=!0,l=k.add.sprite(k.world.centerX,m.y-16,"breakout","ball_1.png"),l.anchor.set(.5),l.checkWorldBounds=!0,k.physics.enable(l,Phaser.Physics.ARCADE),l.body.collideWorldBounds=!0,l.body.bounce.set(1),l.animations.add("spin",["ball_1.png","ball_2.png","ball_3.png","ball_4.png","ball_5.png"],50,!0,!1),l.events.onOutOfBounds.add(g,this),r=k.add.text(32,550,"score: 0",{font:"20px Arial",fill:"#ffffff",align:"left"}),s=k.add.text(680,550,"lives: 3",{font:"20px Arial",fill:"#ffffff",align:"left"}),t=k.add.text(k.world.centerX,400,"- click to start -",{font:"40px Arial",fill:"#ffffff",align:"center"}),t.anchor.setTo(.5,.5),k.input.onDown.add(f,this)}function e(){m.x=k.input.x,m.x<24?m.x=24:m.x>k.width-24&&(m.x=k.width-24),o?l.body.x=m.x:(k.physics.arcade.collide(l,m,j,null,this),k.physics.arcade.collide(l,n,i,null,this))}function f(){o&&(o=!1,l.body.velocity.y=-300,l.body.velocity.x=-75,l.animations.play("spin"),t.visible=!1)}function g(){p--,s.text="lives: "+p,0===p?h():(o=!0,l.reset(m.body.x+16,m.y-16),l.animations.stop())}function h(){l.body.velocity.setTo(0,0),t.text="Game Over!",t.visible=!0}function i(a,b){b.kill(),q+=10,r.text="score: "+q,0==n.countLiving()&&(q+=1e3,r.text="score: "+q,t.text="- Next Level -",o=!0,l.body.velocity.set(0),l.x=m.x+16,l.y=m.y-16,l.animations.stop(),n.callAll("revive"))}function j(a,b){var c=0;a.x<b.x?(c=b.x-a.x,a.body.velocity.x=-10*c):a.x>b.x?(c=a.x-b.x,a.body.velocity.x=10*c):a.body.velocity.x=2+8*Math.random()}var k,l,m,n,o,p,q,r,s,t,u;return{setters:[],execute:function(){k=new Phaser.Game(800,600,Phaser.AUTO,"phaser-example",{preload:c,create:d,update:e}),o=!0,p=3,q=0}}}),System.register("server/main.js",[],function(a,b){"use strict";function c(){l.set("port",process.env.PORT||9e3),l.use(n.initialize()),l.use(n.session()),l.use(k["static"](p)),l.get("/",function(a,b){b.sendFile("index.html",{root:m.join(__dirname,"../../build/")})}),q=l.listen(l.get("port"),function(){console.log("App running on port",l.get("port")),console.log("static: "+p)}),r=require("socket.io").listen(q)}function d(){e()}function e(){r.on("connection",function(a){console.log("server side handshake"),u.push(a),a.emit("handshakeToClient",v),a.on("disconnect",function(){console.log("socket on disconnect: "+a),h(a)}),a.on("connectPlayerToServer",function(b){j(b,a)}),a.on("UpdatePlayer",function(a){i(a)}),a.on("PushDB",function(){f(a)})})}function f(a){var b=new Object;b.name="Mark",b.PlayerId="1";g(a)}function g(a){var b=new Object;b.PlayerId=1,mongo.GetUser(b,a)}function h(a){var b=u.indexOf(a);u.splice(b,b),r.emit("UpdateConnections",u.length)}function i(a){var b=JSON.parse(a);console.log(b),r.emit("UpdatePlayers",a)}function j(a,b){v>7&&(v=0);var c=JSON.parse(a);c.id=v,c.name=s[v],c.socket=b.id,t[c.id]=c,r.emit("AddPlayerToClient",JSON.stringify(c)),r.emit("AddPlayerToUI",t),r.emit("UpdateUsers",t.length),r.emit("UpdateConnections",u.length)}var k,l,m,n,o,p,q,r,s,t,u,v,w;return{setters:[],execute:function(){k=require("express"),l=k(),m=require("path"),n=require("passport"),o=require("passport-local").Strategy,p=m.join(__dirname,"../../build"),s=["Mark","Peter","Jan","George","Andrew","Laura","Jordan","Andrew"],t=[],u=[],v=0,w=0,c(),d()}}}),System.register("server/mongo.js",[],function(a,b){"use strict";var c,d,e,f,g;return{setters:[],execute:function(){c={},module.exports=c,d=require("mongodb").MongoClient,e=require("assert"),f="admin",g="data*base123",c.Connect=function(){console.log("Attemping connection to DB.");var a="mongodb://"+f+":"+g+"@ds047812.mongolab.com:47812/heroku_c8hphtwn";d.connect(a,function(a,b){e.equal(null,a),console.log("Connected correctly to server"),db=b})},c.InsertUser=function(a){console.log("Insert user");var b=db.collection("users");b.insertOne(a,function(a){null!=a&&console.log("Error: "+a)})},c.UpdateUser=function(a,b){console.log("Update user");var c=db.collection("users");c.updateOne(a,{$set:b},function(a,b){e.equal(null,a),e.equal(1,b.matchedCount),e.equal(1,b.modifiedCount)})},c.RemoveUser=function(a){console.log("Remove user");var b=db.collection("users");b.deleteOne(a,function(a,b){e.equal(null,a),e.equal(1,b.deletedCount)})},c.GetUser=function(a,b){console.log("Getting user: "+JSON.stringify(a));var c={PlayerId:"2"},d=db.collection("users");d.find(c).limit(1).next(function(a,c){e.equal(null,a),e.ok(null!=c),b.emit("SendUser",c)})}}}}),System.register("states/CreatePlayer.js",["../client/game/player/player","lodash"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h;return{setters:[function(a){f=a.Player},function(a){g=a["default"]}],execute:function(){h=function(a){function b(){return c(this,b),d(this,a.apply(this,arguments))}return e(b,a),b}(Phaser.State)}}}),function(){var a=System.amdDefine;a("welcome.html!github:systemjs/plugin-text@0.0.3.js",[],function(){return'<template> <section class="au-animate"> <h2>${heading}</h2> <h4>Damp Hamlet is a top down action game developed for your browser.</h4> <form role="form" submit.delegate="submit()"> <div class="form-group"> <label for="fn">First Name</label> <input value.bind="firstName" class="form-control" id="fn" placeholder="first name"> </div> <div class="form-group"> <label for="ln">Last Name</label> <input value.bind="lastName" class="form-control" id="ln" placeholder="last name"> </div> <div class="form-group"> <label for="summary">Summary</label> <input value.bind="summary" class="form-control" id="ln" placeholder="summary"> </div> <button type="submit" class="btn btn-default">Submit</button> </form> </section> </template>'})}(),System.register("states/loadassets.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("LoadAssets",d=function(){function a(b){c(this,a),this.game=b,this.loadItems(),this.loadCharacters(),this.loadLevels(),this.loadSpritesheets(),this.loadImages(),this.loadAudio(),console.log("finish loading assets")}return a.prototype.loadItems=function(){for(var a=this.game,b=[6,30,31,36,49,51,66,79,96,126,141,81,82,83,84,85,86,87,88,89,90],c=1;150>c;c++)b.indexOf(c)>0||6==c||a.load.image("item-"+c,this.game.itempath+"item-"+c+".png")},a.prototype.loadCharacters=function(){for(var a=this.game,b=this.game.characterpath,c=1;22>c;c++){var d="char"+c,e="";e=10>c?b+"Layer-7_0"+c+".png":b+"Layer-7_"+c+".png",a.load.spritesheet(d,e,8,8)}},a.prototype.loadLevels=function(){var a=this.game,b=this.game.assetpath;a.load.tilemap("base",b+"base.json",null,Phaser.Tilemap.TILED_JSON),a.load.tilemap("level1",b+"level1.json",null,Phaser.Tilemap.TILED_JSON),a.load.tilemap("level2",b+"level2.json",null,Phaser.Tilemap.TILED_JSON),a.load.tilemap("level3",b+"level3.json",null,Phaser.Tilemap.TILED_JSON),a.load.image("tiles",b+"tiles.png")},a.prototype.loadSpritesheets=function(){var a=this.game,b=this.game.enemypath,c=this.game.bosspath;a.load.spritesheet("green_alien",b+"png8_03.png",8,8),a.load.spritesheet("red_alien",b+"png8_05.gif",8,8),a.load.spritesheet("octopus",b+"png8_06.png",8,8),a.load.spritesheet("slime",b+"png8_07.gif",8,8),a.load.spritesheet("rat",b+"png8_08.gif",8,8),a.load.spritesheet("teal_alien",b+"png8_09.gif",8,8),a.load.spritesheet("furry_alien",b+"png8_10.gif",8,8),a.load.spritesheet("eyeball",b+"png8_11.gif",8,8),a.load.spritesheet("spider",b+"png8_12.gif",8,8),a.load.spritesheet("dog",b+"png8_13.gif",8,8),a.load.spritesheet("zombie",b+"png8_14.gif",8,8),a.load.spritesheet("greententacle",b+"png8_15.gif",8,8),a.load.spritesheet("white_alien",b+"png8_16.gif",8,8),a.load.spritesheet("blue_alien",b+"png8_17.gif",8,8),a.load.spritesheet("blackred_alien",b+"png8_18.gif",8,8),a.load.spritesheet("plasmoid",b+"png8_19.gif",8,8),a.load.spritesheet("green_alien3",b+"png8_20.gif",8,8),a.load.spritesheet("snake",b+"png8_21.gif",8,8),a.load.spritesheet("furry_alien2",b+"png8_22.gif",8,8),a.load.spritesheet("greenchecker",b+"png8_23.gif",8,8),a.load.spritesheet("mindflayer",b+"png8_24.gif",8,8),a.load.spritesheet("psionicist",b+"png8_25.gif",8,8),a.load.spritesheet("grayrobot",b+"png8_26.gif",8,8),a.load.spritesheet("yellowrobot",b+"png8_27.gif",8,8),a.load.spritesheet("blackblob",b+"png8_29.gif",8,8),a.load.spritesheet("blackhole",c+"BlackHole.png",32,32)},a.prototype.loadImages=function(){var a=this.game,b=this.game.itempath,c=this.game.fxpath;a.load.image("explode1",c+"oryx_16bit_fantasy_fx_83.png"),a.load.image("explode2",c+"oryx_16bit_fantasy_fx_83.png"),a.load.image("red_shot",b+"item-67.png"),a.load.image("red_shot2",b+"item-68.png"),a.load.image("red_shot3",b+"item-69.png"),a.load.image("purple_shot",b+"item-70.png"),a.load.image("purple_shot2",b+"item-71.png"),a.load.image("purple_shot3",b+"item-72.png")},a.prototype.loadAudio=function(){var a=this.game,b=a.soundpath,c=a.hurtpath,d=a.ambiencepath,e=a.fabricpath,f=a.footpath;a.load.audio("explosion",b+"medium-explosion.wav"),a.load.audio("flyby-slow",b+"flyby-slow.wav"),a.load.audio("short-assaultrifle",b+"short-assaultrifle.wav"),a.load.audio("short-pistol",b+"short-pistol.wav"),a.load.audio("short-reloadpistol",b+"short-reloadpistol.wav"),a.load.audio("short-shotgun",b+"short-shotgun.wav"),a.load.audio("shotgun1",b+"FIREARM Shotgun Model 01 Fire Single RR1 (stereo).wav"),a.load.audio("shotgun2",b+"FIREARM Shotgun Model 01 Fire Single RR2 (stereo).wav"),a.load.audio("shotgun3",b+"FIREARM Shotgun Model 01 Fire Single RR3 (stereo).wav"),a.load.audio("shotgunreload",b+"RELOAD Pump Dark (stereo).wav"),a.load.audio("short-reloadshotgun",b+"short-reloadshotgun.wav"),a.load.audio("blaster1",b+"BLASTER Bright Piercing Pitch Down (stereo).wav"),a.load.audio("blaster2",b+"BLASTER Bright Piercing Pitch Sweep Down (stereo).wav"),a.load.audio("hurt1",c+"GROAN Male Hurt Long (mono).wav"),a.load.audio("hurt2",c+"GROAN Male Hurt Long Pain (mono).wav"),a.load.audio("hurt3",c+"GROAN Male Hurt Long (mono).wav"),a.load.audio("hurt4",c+"GRUNT Male Hurt 01 (mono).wav"),a.load.audio("hurt5",c+"GRUNT Male Hurt 02 (mono).wav"),a.load.audio("hurt6",c+"GRUNT Male Hurt 03 (mono).wav"),a.load.audio("hurt7",c+"GRUNT Male Quick (mono).wav"),a.load.audio("hurt8",c+"GRUNT Male Quick Deep (mono).wav"),a.load.audio("hurt9",c+"GRUNT Male Subtle Hurt (mono).wav"),a.load.audio("hurt0",c+"GRUNT Male Subtle Quick (mono).wav"),a.load.audio("pickup1",e+"FABRIC Movement Fast 01 (mono).wav"),a.load.audio("pickup2",e+"FABRIC Movement Fast 02 (mono).wav"),a.load.audio("pickup3",e+"FABRIC Movement Fast 03 (mono).wav"),a.load.audio("hangar1",d+"AMBIENCE SCI-FI Space Hangar (loop stereo).wav"),a.load.audio("hangar2",d+"AMBIENCE SCI-FI Large Space Hangar Deep Smooth (loop stereo).wav"),a.load.audio("lava-deep",d+"AMBIENCE SCI-FI Lava Molten Deep (loop stereo).wav"),a.load.audio("lava-pit",d+"AMBIENCE SCI-FI Lava Molten Pit (loop stereo).wav"),a.load.audio("underwater-active",d+"AMBIENCE UNDER WATER Active (loop stereo).wav"),a.load.audio("underwater-deep",d+"AMBIENCE UNDER WATER Deep and Dark (loop stereo).wav"),a.load.audio("forest",d+"AMBIENCE NATURE Summer Broadleaf Forest Wind (loop stereo).wav"),a.load.audio("walkmetal1",f+"FOOTSTEP Run Shoes Hollow Metal RR1 (mono).wav"),a.load.audio("walkmetal2",f+"FOOTSTEP Run Shoes Hollow Metal RR2 (mono).wav"),a.load.audio("walkmetal3",f+"FOOTSTEP Run Shoes Hollow Metal RR3 (mono).wav"),a.load.audio("walkmetal4",f+"FOOTSTEP Run Shoes Hollow Metal RR4 (mono).wav"),a.load.audio("walkmetal5",f+"FOOTSTEP Run Shoes Hollow Metal RR5 (mono).wav"),a.load.audio("walkmetal6",f+"FOOTSTEP Run Shoes Hollow Metal RR6 (mono).wav"),a.load.audio("walkmetal7",f+"FOOTSTEP Run Shoes Hollow Metal RR7 (mono).wav"),a.load.audio("walkmetal8",f+"FOOTSTEP Run Shoes Hollow Metal RR8 (mono).wav"),a.load.audio("elevatorOpen",b+"DOOR Elevator Open 01 (mono).wav"),a.load.audio("doorClose",b+"DOOR Sci-Fi Heavy Close (mono).wav")},a}()),a("LoadAssets",d)}}}),System.register("states/GameState.js",["../client/game/player/player","../client/game/items/item","../client/game/items/health","./loadassets","./MusicHandler"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h,i,j,k;return{setters:[function(a){f=a.Player},function(a){g=a.Item},function(a){h=a.Health},function(a){i=a.LoadAssets},function(a){j=a.MusicHandler}],execute:function(){k=function(a){function b(){return c(this,b),d(this,a.apply(this,arguments))}return e(b,a),b.prototype.preload=function(){var a=this.game;new i(a);a.onBlur.add(function(){console.log("BLURRED"),a.players.length>0&&(a.players[0].pressStack.pop(),a.players[0].isFireDown=!1)},this),console.log("finish preload")},b.prototype.init=function(){var a=this.game;a.time.advancedTiming=!0,a.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,a.world.setBounds(0,0,1920,1920),a.physics.startSystem(Phaser.Physics.P2JS),a.physics.p2.setBoundsToWorld(!0,!0,!0,!0,!0),a.physics.p2.restitution=.8,a.playerCollisionGroup=a.physics.p2.createCollisionGroup(),a.enemyCollisionGroup=a.physics.p2.createCollisionGroup(),a.weaponCollisionGroup=a.physics.p2.createCollisionGroup(),a.tileCollisionGroup=a.physics.p2.createCollisionGroup(),a.enemyWeaponCollisionGroup=a.physics.p2.createCollisionGroup(),a.itemCollisionGroup=a.physics.p2.createCollisionGroup(),a.blockCollisionGroup=a.physics.p2.createCollisionGroup(),a.enemyCount=0,a.connections=0,a.updateInterval=0,a.attackRate=1e3,a.nextAttack=0,a.scalemultiple=4,a.enemies=[],a.slimes=[],a.eyes=[],a.greenaliens=[],a.redaliens=[],a.octopi=[],a.rats=[],a.tealaliens=[],a.furryaliens=[],a.spiders=[],a.players=[],console.log("finish init")},b.prototype.create=function(){this.enterWorld(),console.log("finish create")},b.prototype.enterWorld=function(){var a="";a="female"==damphamlet.gender.toLowerCase()?"char18":"char8";var b={x:296,y:320,sprite:a,"class":damphamlet.playerClass},c=damphamlet.createNewPlayer(b),d=c.getPlayerObject();this.state.start("Base",!0,!1,d)},b}(Phaser.State),a("default",k)}}}),System.register("states/MusicHandler.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("MusicHandler",d=function(){function a(b){c(this,a),this.game=b,this.loadSoundtracks()}return a.prototype.loadSoundtracks=function(){this.tracks=[],this.hangar1=this.game.add.audio("hangar1"),this.hangar2=this.game.add.audio("hangar2"),this.lavaActive=this.game.add.audio("lava-active"),this.lavaDeep=this.game.add.audio("lava-deep"),this.underwaterActive=this.game.add.audio("underwater-active"),this.underwaterDeep=this.game.add.audio("underwater-deep"),this.forest=this.game.add.audio("forest"),this.tracks.push(this.hangar1),this.tracks.push(this.hangar2),this.tracks.push(this.lavaActive),this.tracks.push(this.lavaDeep),this.tracks.push(this.underwaterActive),this.tracks.push(this.underwaterDeep),this.tracks.push(this.forest),this.setVolume(.15,!0)},a.prototype.setVolume=function(a,b){for(var c=0;c<this.tracks.length;c++){var d=this.tracks[c];d.volume=a,d.loop=b}},a.prototype.getTrack=function(a){for(var b=0;b<this.tracks.length;b++)if(this.tracks[b].name===a)return this.tracks[b];return""},a.prototype.playTrack=function(a){this.stopMusic();var b=this.getTrack(a);b.play(),console.log("playing track "+b.name)},a.prototype.stopMusic=function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].stop(),console.log("stopping track "+a)},a}()),a("MusicHandler",d)}}}),System.register("states/base.js",["../client/game/player/player","./creator","../client/game/items/item","../client/game/items/health","./MusicHandler","lodash"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h,i,j,k,l;return{setters:[function(a){f=a.Player},function(a){g=a.Creator},function(a){h=a.Item},function(a){i=a.Health},function(a){j=a.MusicHandler},function(a){k=a["default"]}],execute:function(){l=function(a){function b(){return c(this,b),d(this,a.apply(this,arguments))}return e(b,a),b.prototype.init=function(a){var b=this.game;b.players=[],b.playerObj=a,b.physics.p2.setImpactEvents(!0),b.MusicHandler=new j(b)},b.prototype.preload=function(){this.stage.disableVisibilityChange=!0},b.prototype.render=function(){var a=this.game;a.ball},b.prototype.create=function(){var a=this.game;this.map=a.add.tilemap("base");var b=this.map;b.addTilesetImage("tiles");var c=b.createLayer("Tile Layer 1");c.smoothed=!1,c.setScale(a.scalemultiple),c.resizeWorld();var d=b.createLayer("Tile Layer 2");d.smoothed=!1,d.setScale(a.scalemultiple),d.resizeWorld(),b.setCollisionByExclusion([333]);for(var e=a.physics.p2.convertTilemap(b,c,!0,!1),f=0;f<e.length;f++)e[f].setCollisionGroup(a.tileCollisionGroup),e[f].collides([a.playerCollisionGroup,a.weaponCollisionGroup,a.enemyWeaponCollisionGroup,a.enemyCollisionGroup,a.blockCollisionGroup]);a.physics.p2.setBoundsToWorld(!0,!0,!0,!0,!0),a.physics.p2.restitution=.8;var h={x:592,y:400,sprite:a.playerObj.playertype},i=damphamlet.loadPlayer(h);a.players.push(i);var j=new g(a,this.map);j.createSlimes(3),this.game.MusicHandler.playTrack("hangar1")},b}(Phaser.State),a("default",l)}}}),System.register("states/Level1.js",["../client/game/player/player","../client/game/bosses/blackhole","./creator","../client/game/items/item","../client/game/items/health","lodash"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h,i,j,k,l;return{setters:[function(a){f=a.Player},function(a){g=a.BlackHole},function(a){h=a.Creator},function(a){i=a.Item},function(a){j=a.Health},function(a){k=a["default"]}],execute:function(){l=function(a){function b(){return c(this,b),d(this,a.apply(this,arguments))}return e(b,a),b.prototype.init=function(a){this.damphamlet=window.damphamlet;var b=this.game;b.players=[],b.playerObj=a,b.physics.p2.setImpactEvents(!0),b.onBlur.add(function(){console.log("BLURRED"),b.players.length>0&&b.players[0].pressStack.pop()},this)},b.prototype.preload=function(){this.stage.disableVisibilityChange=!0},b.prototype.render=function(){var a=this.game;a.debug.text(a.time.fps||"--",2,14,"#00ff00")},b.prototype.create=function(){console.log("create level1");var a=this.game;this.map=a.add.tilemap("level1");var b=this.map;b.addTilesetImage("tiles");var c=b.createLayer("Tile Layer 1");c.smoothed=!1,c.setScale(a.scalemultiple),c.resizeWorld();var d=b.createLayer("Tile Layer 2");d.smoothed=!1,d.setScale(a.scalemultiple),d.resizeWorld(),b.setCollisionByExclusion([274,295,296,297,298]);for(var e=a.physics.p2.convertTilemap(b,c),f=0;f<e.length;f++)e[f].setCollisionGroup(a.tileCollisionGroup),e[f].collides([a.playerCollisionGroup,a.weaponCollisionGroup,a.enemyWeaponCollisionGroup,a.enemyCollisionGroup]);a.physics.p2.setBoundsToWorld(!0,!0,!0,!0,!0),a.physics.p2.restitution=.8;var g={x:50,y:50,sprite:a.playerObj.playertype},i=this.damphamlet.loadPlayer(g);a.players.push(i),this.game.MusicHandler.playTrack("hangar2");var j=new h(a,this.map);j.createEyes(2),j.createSlimes(3),this.game.time.events.loop(3*Phaser.Timer.SECOND,j.loopEnemies,this)},b}(Phaser.State),a("default",l)}}}),System.register("states/Level2.js",["../client/game/player/player","./creator"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h;return{setters:[function(a){f=a.Player},function(a){g=a.Creator}],execute:function(){h=function(a){function b(){return c(this,b),d(this,a.apply(this,arguments))}return e(b,a),b.prototype.preload=function(){},b.prototype.render=function(){this.game.debug.text(this.game.time.fps||"--",2,14,"#00ff00")},b.prototype.init=function(a){this.damphamlet=window.damphamlet;var b=this.game;b.enemyCount=0,b.connections=0,b.updateInterval=0,b.enemies=[],b.attackRate=1e3,b.nextAttack=0,b.scalemultiple=4,b.slimes=[],b.eyes=[],b.greenaliens=[],b.redaliens=[],b.octopi=[],b.rats=[],b.tealaliens=[],b.furryaliens=[],b.spiders=[],b.enemyCount=0,b.players=[],b.playerObj=a,b.onBlur.add(function(){console.log("BLURRED"),b.players.length>0&&b.players[0].pressStack.pop()},this)},b.prototype.preload=function(){this.stage.disableVisibilityChange=!0},b.prototype.create=function(){var a=this.game;this.map=a.add.tilemap("level2"),this.map.addTilesetImage("tiles");var b=this.map.createLayer("Tile Layer 1");b.smoothed=!1,b.setScale(a.scalemultiple),b.resizeWorld();var c=this.map.createLayer("Tile Layer 2");c.smoothed=!1,c.setScale(a.scalemultiple),c.resizeWorld(),this.map.setCollisionByExclusion([272,298,299,354,276,301]);for(var d=a.physics.p2.convertTilemap(this.map,b),e=0;e<d.length;e++)d[e].setCollisionGroup(a.tileCollisionGroup),d[e].collides([a.playerCollisionGroup,a.weaponCollisionGroup,a.enemyWeaponCollisionGroup,a.enemyCollisionGroup]);var f={x:50,y:50,sprite:a.playerObj.playertype},h=damphamlet.loadPlayer(f);a.players.push(h),this.game.MusicHandler.playTrack("underwater-active");var i=new g(a,this.map);i.createGreenAliens(10),i.createRedAliens(10),this.game.time.events.loop(3*Phaser.Timer.SECOND,i.loopEnemies,this)},b}(Phaser.State),a("default",h)}}}),System.register("client/game/weapons/enemyweapons/fastshot.js",["./enemyweapon"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.EnemyWeapon}],execute:function(){a("FastShot",g=function(a){function b(e){c(this,b);var f=d(this,a.call(this,e,"item-99",50));return f.setup(),f}return e(b,a),b.prototype.setup=function(){this.fireRate=100,this.weapons.setAll("speed",250),this.weapons.setAll("mass",1),this.weapons.setAll("size",2),this.weapons.setAll("damage",1)},b.prototype.fire=function(b,c,d){return a.prototype.fire.call(this,b,c,d)},b}(f)),a("FastShot",g)}}}),System.register("client/game/bosses/boss.js",["../items/health","../items/ammo","../weapons/enemyweapons/fastshot","../weapons/enemyweapons/slowshot"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h,i,j;return{setters:[function(a){f=a.Health},function(a){g=a.BulletAmmo},function(a){h=a.FastShot},function(a){i=a.SlowShot}],execute:function(){a("Boss",j=function(a){function b(e,f,g,h,j){c(this,b);var k=d(this,a.call(this,g,h,j,f));return g.add.existing(k),g.physics.p2.enable(k),g.enemyCount+=1,$(".enemyCount").text(g.enemyCount),k.game=g,k.target=null,k.reset(g),k.weapon=new i(g),k.firingPause=500,k.game.time.events.loop(500,k.flip,k),k}return e(b,a),b.prototype.update=function(){this.checkForPlayers(500,1e3),this.move(this.target),this.attack()},b.prototype.checkForPlayers=function(){for(var a=this.game,b=0;b<a.players.length;b++){var c=this.game.physics.arcade.distanceBetween(this,a.players[b]);400>c&&(this.target=a.players[b]),c>1e3&&(this.target=null)}},b.prototype.move=function(){if(1==this.alive&&this.nextMove&&null!=this.target){var a=this.game.math.normalizeAngle(this.game.physics.arcade.angleBetween(this,this.target));
a>Math.PI/4&&a<3*Math.PI/4?this.body.moveDown(this.speed):a>7*Math.PI/4&&a<2*Math.PI||a>0&&a<Math.PI/6?this.body.moveRight(this.speed):a>4*Math.PI/3&&a<7*Math.PI/4?this.body.moveUp(this.speed):a>3*Math.PI/4&&a<5*Math.PI/4?this.body.moveLeft(this.speed):this.game.physics.arcade.moveToObject(this,this.target,this.speed)}},b.prototype.flip=function(){this.scale.x*=-1},b.prototype.attack=function(){if(null!=this.target){var a=Math.floor(4*Math.random()),b=this.weapon.fire(this.body.x,this.body.y,a);b&&(this.nextMove=this.game.time.now+this.firingPause)}},b.prototype.multifire=function(){this.weapon.multifire(this.body.x,this.body.y)},b.prototype.rageattack=function(){var a=this.weapon.multifire(this.body.x,this.body.y,0);this.weapon.multifire(this.body.x,this.body.y,1),this.weapon.multifire(this.body.x,this.body.y,2),this.weapon.multifire(this.body.x,this.body.y,3);a&&(this.nextMove=this.game.time.now+this.firingPause)},b.prototype.reset=function(a){this.hp=1,this.speed=10,this.nextAttack=1e3,this.attackRate=5e3+5e3*Math.random(),this.nextMove=1e3,this.name=name,this.alive=1,this.weaponSprite="purple_shot",this.damage=2,this.scale.setTo(this.game.scalemultiple),this.smoothed=!1,this.body.setRectangleFromSprite(),this.body.setCollisionGroup(a.enemyCollisionGroup),this.body.fixedRotation=!0,this.body.collides(a.weaponCollisionGroup,this.enemyHitByWeapon,this),this.body.collides([a.enemyCollisionGroup,a.playerCollisionGroup,a.tileCollisionGroup]),this.body.mass=10,this.body.damping=.999,this.weapons=this.game.add.group(),this.weapons.enableBody=!0,this.weapons.physicsBodyType=Phaser.Physics.P2JS},b.prototype.getSprite=function(){return this},b.prototype.weaponHit=function(a,b){this.kill()},b.prototype.enemyHitByWeapon=function(a,b){this.hp-=b.sprite.damage,$(".enemyHealth").text(this.name+" "+this.hp),this.hp<1&&this.die()},b.prototype.die=function(){this.alive=0,this.game.enemyCount--,$(".enemyCount").text(this.game.enemyCount);var a=this.game.rnd.between(1,5);if(1==a){new f(this.game,this.body.x,this.body.y)}if(2==a){new g(this.game,this.body.x,this.body.y)}this.destroy()},b}(Phaser.Sprite)),a("Boss",j)}}}),System.register("client/game/bosses/blackhole.js",["./boss"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Boss}],execute:function(){a("BlackHole",g=function(a){function b(e,f,g,h){c(this,b);var i=d(this,a.call(this,e,"blackhole",f,g,h));return i.sprite=a.prototype.getSprite.call(i),i.game=f,i.speed=75,i.hp=750,i.nextAttack=1500,i.weapon.setInt("speed",250),i.weapon.setDamage(5),i.weapon.fireRate=150,i.direction=0,i.xp=15,i.credits=f.rnd.between(150,250),i}return e(b,a),b.prototype.move=function(){a.prototype.move.call(this)},b.prototype.attack=function(){if(null!=this.target){this.direction>7&&(this.direction=0);var a=this.weapon.fire(this.body.x,this.body.y,this.direction);a&&(this.nextMove=this.game.time.now+this.firingPause,this.direction++)}},b.prototype.weaponHit=function(b,c){a.prototype.weaponHit.call(this,b,c)},b.prototype.enemyHitByWeapon=function(b,c){a.prototype.enemyHitByWeapon.call(this,b,c)},b}(f)),a("BlackHole",g)}}}),System.register("client/game/mobs/eye.js",["phaser","./mob","../weapons/enemyweapons/slowshot"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h,i;return{setters:[function(a){f=a["default"]},function(a){g=a.Mob},function(a){h=a.SlowShot}],execute:function(){a("Eye",i=function(a){function b(e,f,g,i){c(this,b);var j=d(this,a.call(this,e,"eyeball",f,g,i));return j.enraged=0,j.speed=10+5*Math.random(),j.maxSpeed=50,j.hp=50,j.maxHp=50,j.weapon=new h(f),j.nextMove=1e3,j.firingPause=1500,j.mass=10,j.weapon.sfxFire=j.game.add.audio("blaster2"),j.weapon.setInt("speed",200),j.weapon.setDamage(1),j}return e(b,a),b.prototype.update=function(){this.move(),this.enraged?this.rageAttack():this.attack()},b.prototype.move=function(){this.game.time.now>this.nextMove&&a.prototype.move.call(this)},b.prototype.attack=function(){a.prototype.attack.call(this)},b.prototype.rageAttack=function(){a.prototype.multifire.call(this)},b.prototype.weaponHit=function(b,c){a.prototype.weaponHit.call(this,b,c)},b.prototype.enemyHitByWeapon=function(b,c){a.prototype.enemyHitByWeapon.call(this,b,c),this.enrage()},b.prototype.enrage=function(){this.hp>0&&this.hp<this.maxHp/1.5&&(this.weapon.nextFire=0,this.speed=this.game.math.clamp(2*this.speed,1,this.maxSpeed),this.weapon.setDamage(1.25*this.weapon.damage),this.weapon.setInt("speed",500),this.weapon.fireRate=.75*this.weapon.fireRate,this.firingPause=.5*this.firingPause,this.tint=16711680,this.enraged=1)},b}(g)),a("Eye",i)}}}),System.register("client/game/mobs/slime.js",["./mob"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Mob}],execute:function(){a("Slime",g=function(a){function b(e,f,g,h){c(this,b);var i=d(this,a.call(this,e,"slime",f,g,h));return i.sprite=a.prototype.getSprite.call(i),i.game=f,i.speed=35,i.hp=65,i.nextAttack=1e3,i.attackRate=250,i.weaponSprite="purple_shot2",i.hateList=[],i.weapon.setDamage(3),i}return e(b,a),b.prototype.update=function(){this.move(),this.attack()},b.prototype.move=function(){a.prototype.move.call(this)},b.prototype.attack=function(){a.prototype.attack.call(this)},b.prototype.weaponHit=function(b,c){a.prototype.weaponHit.call(this,b,c)},b.prototype.enemyHitByWeapon=function(b,c){a.prototype.enemyHitByWeapon.call(this,b,c)},b.prototype.checkForPlayers=function(a,b){if(this.alive)for(var c=0;c<this.game.players.length;c++)this.distanceToTarget=this.game.physics.arcade.distanceBetween(this,this.game.players[c]),this.distanceToTarget<a&&(this.target=this.game.players[c],this.angleToTarget=this.game.math.normalizeAngle(this.game.physics.arcade.angleBetween(this,this.target)),this.getDirToTarget(this.angleToTarget)),this.distanceToTarget<b&&(console.log("check for players",this.distanceToTarget,b),this.target=this.game.players[c],this.angleToTarget=this.game.math.normalizeAngle(this.game.physics.arcade.angleBetween(this,this.target)),this.getDirToTarget(this.angleToTarget)),this.distanceToTarget>b&&(this.target=null,this.direction+=1,console.log("first mob at "+this.distanceToTarget),this.direction>3&&(this.direction=0))},b}(f)),a("Slime",g)}}}),System.register("client/game/mobs/greenalien.js",["./mob"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Mob}],execute:function(){a("GreenAlien",g=function(a){function b(e,f,g,h){c(this,b);var i=d(this,a.call(this,e,"green_alien",f,g,h));return i.sprite=a.prototype.getSprite.call(i),i.game=f,i.speed=55,i.hp=100,i.nextAttack=1e3,i.firingPause=250,i.xp=3,i.credits=f.rnd.between(10,20),i.weapon.setDamage(4),i.weapon.setInt("speed",400),i.weapon.fireRate=2e3,i}return e(b,a),b.prototype.move=function(){a.prototype.move.call(this)},b.prototype.attack=function(){a.prototype.attack.call(this)},b.prototype.weaponHit=function(b,c){a.prototype.weaponHit.call(this,b,c)},b.prototype.enemyHitByWeapon=function(b,c){a.prototype.enemyHitByWeapon.call(this,b,c)},b}(f)),a("GreenAlien",g)}}}),System.register("client/game/mobs/red_alien.js",["./mob"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Mob}],execute:function(){a("RedAlien",g=function(a){function b(e,f,g,h){c(this,b);var i=d(this,a.call(this,e,"red_alien",f,g,h));return i.sprite=a.prototype.getSprite.call(i),i.game=f,i.speed=20+5*Math.random(),i.hp=75,i.nextAttack=1e3,i.attackRate=200+500*Math.random(),i.weaponSprite="purple_shot2",i.weapon.setDamage(2),i.xp=2,i.credits=f.rnd.between(2,10),i}return e(b,a),b.prototype.move=function(){a.prototype.move.call(this)},b.prototype.attack=function(){a.prototype.multifire.call(this,this.body.x,this.body.y)},b.prototype.weaponHit=function(b,c){a.prototype.weaponHit.call(this,b,c)},b.prototype.enemyHitByWeapon=function(b,c){a.prototype.enemyHitByWeapon.call(this,b,c)},b}(f)),a("RedAlien",g)}}}),System.register("client/game/mobs/octopus.js",["./mob"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Mob}],execute:function(){a("Octopus",g=function(a){function b(e,f,g,h){c(this,b);var i=d(this,a.call(this,e,"octopus",f,g,h));return i.sprite=a.prototype.getSprite.call(i),i.game=f,i.speed=15+5*Math.random(),i.hp=75,i.nextAttack=3e3,i.attackRate=200,i.weaponSprite="purple_shot",i}return e(b,a),b.prototype.move=function(){a.prototype.move.call(this)},b.prototype.attack=function(){a.prototype.attack.call(this)},b.prototype.weaponHit=function(b,c){a.prototype.weaponHit.call(this,b,c)},b.prototype.enemyHitByWeapon=function(b,c){a.prototype.enemyHitByWeapon.call(this,b,c)},b}(f)),a("Octopus",g)}}}),System.register("client/game/mobs/rat.js",["./mob"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Mob}],execute:function(){a("Rat",g=function(a){function b(e,f,g,h){c(this,b);var i=d(this,a.call(this,e,"rat",f,g,h));return i.sprite=a.prototype.getSprite.call(i),i.game=f,i.speed=10+5*Math.random(),i.hp=20,i.nextAttack=1e3,i.attackRate=1e3,i.weaponSprite="purple_shot",i}return e(b,a),b.prototype.move=function(){a.prototype.move.call(this)},b.prototype.attack=function(){a.prototype.attack.call(this)},b.prototype.weaponHit=function(b,c){a.prototype.weaponHit.call(this,b,c)},b.prototype.enemyHitByWeapon=function(b,c){a.prototype.enemyHitByWeapon.call(this,b,c)},b}(f)),a("Rat",g)}}}),System.register("client/game/mobs/tealalien.js",["./mob"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Mob}],execute:function(){a("TealAlien",g=function(a){function b(e,f,g,h){c(this,b);var i=d(this,a.call(this,e,"teal_alien",f,g,h));return i.sprite=a.prototype.getSprite.call(i),i.game=f,i.speed=10+5*Math.random(),i.hp=40,i.nextAttack=1e3,i.attackRate=200+1e3*Math.random(),i}return e(b,a),b.prototype.move=function(){a.prototype.move.call(this)},b.prototype.attack=function(){a.prototype.attack.call(this)},b.prototype.weaponHit=function(b,c){a.prototype.weaponHit.call(this,b,c)},b.prototype.enemyHitByWeapon=function(b,c){a.prototype.enemyHitByWeapon.call(this,b,c)},b}(f)),a("TealAlien",g)}}}),System.register("client/game/mobs/furryalien.js",["./mob"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Mob}],execute:function(){a("FurryAlien",g=function(a){function b(e,f,g,h){c(this,b);var i=d(this,a.call(this,e,"furry_alien",f,g,h));return i.sprite=a.prototype.getSprite.call(i),i.game=f,i.speed+=5*Math.random(),i.hp=40,i.nextAttack=1e3,i.attackRate=200+1e3*Math.random(),i}return e(b,a),b.prototype.move=function(){a.prototype.move.call(this)},b.prototype.attack=function(){a.prototype.attack.call(this)},b.prototype.weaponHit=function(b,c){a.prototype.weaponHit.call(this,b,c)},b.prototype.enemyHitByWeapon=function(b,c){a.prototype.enemyHitByWeapon.call(this,b,c)},b}(f)),a("FurryAlien",g)}}}),System.register("client/game/items/credits.js",["phaser","./item"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h;return{setters:[function(a){f=a["default"]},function(a){g=a.Item}],execute:function(){a("Credits",h=function(a){function b(e,f,g,h){c(this,b);var i=d(this,a.call(this,e,f,g,"item-61"));return i.item=a.prototype.getItem.call(i),i.game=e,i.item.amount=h,i.item.body.collides(e.playerCollisionGroup,i.pickup,i),i}return e(b,a),b.prototype.pickup=function(b,c){c.sprite.pickupCredits(this.item.amount),a.prototype.destroy.call(this)},b}(g)),a("Credits",h)}}}),System.register("client/game/weapons/enemyweapons/enemyweapon.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("EnemyWeapon",d=function(){function a(b,d,e){c(this,a),this.game=b,this.checkWorldBounds=!0,this.outOfBoundsKill=!0,this.basicSetup(),this.weapons=b.add.group(),this.weapons.enableBody=!0,this.weapons.physicsBodyType=Phaser.Physics.P2JS,this.addWeapon(0,0,d,e,this.size)}return a.prototype.basicSetup=function(){this.nextFire=0,this.fireRate=500,this.totalAttacks=0,this.size=5,this.speed=100,this.damage=1,this.mass=1,this.sfxFire=this.game.add.audio("blaster1")},a.prototype.addWeapon=function(a,b,c,d,e){for(var f=0;d>f;f++){var g=this.weapons.create(a,b,c,0,!1);this.game.physics.p2.enable(g),g.scale.setTo(this.game.scalemultiple),g.anchor.setTo(.5,.5),g.smoothed=!1,g.physicsBodyType=!0,g.enableBody=!0,g.speed=this.speed,g.damage=this.damage,g.body.mass=this.mass,g.body.setCircle(this.size),g.body.setCollisionGroup(this.game.enemyWeaponCollisionGroup),g.body.collides(this.game.blockCollisionGroup,this.block,g),g.body.collides([this.game.enemyCollisionGroup,this.game.tileCollisionGroup,this.game.playerCollisionGroup],this.weaponHit,g)}},a.prototype.block=function(a,b){console.log("blocked in enemy weapon")},a.prototype.weaponHit=function(a,b){console.log("enemy weapon hit something"),this.kill()},a.prototype.fire=function(a,b,c){if(this.game.time.now>this.nextFire&&this.weapons.countDead()>0){this.nextFire=this.game.time.now+this.game.rnd.between(this.fireRate/5,this.fireRate),this.sfxFire.play(),this.weapons.countDead()<1&&this.weapons.setAll("alive",!1);var d=this.weapons.getFirstDead();switch(d.reset(a,b),c){case 0:return d.body.rotation=90,d.body.moveUp(d.speed),!0;case 1:return d.body.moveRight(d.speed),!0;case 2:return d.body.moveDown(d.speed),!0;case 3:return d.body.moveLeft(d.speed),!0;case 4:return d.body.moveUp(d.speed/2),d.body.moveRight(d.speed/2),!0;case 5:return d.body.moveDown(d.speed/2),d.body.moveRight(d.speed/2),!0;case 6:return d.body.moveDown(d.speed/2),d.body.moveLeft(d.speed/2),!0;case 7:return d.body.moveUp(d.speed/2),d.body.moveLeft(d.speed/2),!0}}},a.prototype.multifire=function(a,b){if(this.game.time.now>this.nextFire&&this.weapons.countDead()>0){this.nextFire=this.game.time.now+this.fireRate;for(var c=0;4>c;c++){this.weapons.countDead()<1&&this.weapons.setAll("alive",!1);var d=this.weapons.getFirstDead();d.reset(a,b),0==c?d.body.moveUp(d.speed):1==c?d.body.moveRight(d.speed):2==c?d.body.moveDown(d.speed):3==c&&d.body.moveLeft(d.speed)}}},a}()),a("EnemyWeapon",d)}}}),System.register("client/game/weapons/enemyweapons/slowshot.js",["./enemyweapon"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.EnemyWeapon}],execute:function(){a("SlowShot",g=function(a){function b(e){c(this,b);var f=d(this,a.call(this,e,"item-100",10));return f.setup(),f}return e(b,a),b.prototype.setup=function(){this.fireRate=5e3,this.nextFire=1e3+1e3*(5*Math.random()),this.weapons.setAll("speed",250),this.weapons.setAll("mass",1),this.weapons.setAll("size",2),this.weapons.setAll("damage",1)},b.prototype.fire=function(b,c,d){return a.prototype.fire.call(this,b,c,d)},b.prototype.multifire=function(b,c){a.prototype.multifire.call(this,b,c)},b.prototype.setDamage=function(a){this.weapons.setAll("damage",a)},b.prototype.setInt=function(a,b){this.weapons.setAll(a,b)},b}(f)),a("SlowShot",g)}}}),System.register("client/game/mobs/mob.js",["../items/health","../items/ammo","../items/credits","../weapons/enemyweapons/slowshot"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h,i,j;return{setters:[function(a){f=a.Health},function(a){g=a.BulletAmmo},function(a){h=a.Credits},function(a){i=a.SlowShot}],execute:function(){a("Mob",j=function(a){function b(e,f,g,h,j){c(this,b);var k=d(this,a.call(this,g,h,j,f));return g.add.existing(k),g.physics.p2.enable(k),g.enemyCount+=1,k.game=g,k.target=null,k.hateList=[],k.resetEnemy(),k.setupSprite(),k.weapon=new i(g),k.firingPause=200,k.credits=g.rnd.between(10,25),k.xp=1,k.distanceToTarget=0,k.angleToTarget=0,k.direction=0,k.nextDirection=5e3,k}return e(b,a),b.prototype.update=function(){this.move(),this.attack()},b.prototype.setCredits=function(a){this.credits=a},b.prototype.checkForPlayers=function(a,b){if(this.alive)for(var c=0;c<this.game.players.length;c++)this.distanceToTarget=this.game.physics.arcade.distanceBetween(this,this.game.players[c]),this.distanceToTarget<a&&(this.target=this.game.players[c],this.angleToTarget=this.game.math.normalizeAngle(this.game.physics.arcade.angleBetween(this,this.target)),this.getDirToTarget(this.angleToTarget)),this.distanceToTarget<b&&this.hateList.length>0&&(this.hateList.push(this.game.players[c]),this.target=this.game.players[c],this.angleToTarget=this.game.math.normalizeAngle(this.game.physics.arcade.angleBetween(this,this.target)),this.getDirToTarget(this.angleToTarget)),this.distanceToTarget>b&&this.hateList.length<1&&(this.target=null,this.direction+=1,console.log("first mob at "+this.distanceToTarget),this.direction>3&&(this.direction=0))},b.prototype.getDirToTarget=function(a){a>4*Math.PI/3&&a<7*Math.PI/4?this.direction=0:a>7*Math.PI/4&&a<2*Math.PI||a>0&&a<Math.PI/6?this.direction=1:a>Math.PI/4&&a<3*Math.PI/4?this.direction=2:a>3*Math.PI/4&&a<5*Math.PI/4?this.direction=3:(console.log("NO ANGLE getDirToTarget",a),this.direction=Math.floor(4*Math.random()))},b.prototype.evasivePattern=function(){},b.prototype.move=function(){if(1==this.alive&&this.nextMove){if(this.hateList.length>0&&(this.target=this.hateList[0]),null!=this.target)return void this.moveByInteger(this.direction);this.game.time.now>this.nextDirection&&(this.direction=Math.floor(4*Math.random()),this.nextDirection=this.game.time.now+5e3),this.moveByInteger(this.direction)}},b.prototype.moveByInteger=function(a){0==a?(this.body.moveUp(this.speed),this.animations.play("up")):1==a?(this.body.moveRight(this.speed),this.animations.play("right")):2==a?(this.body.moveDown(this.speed),this.animations.play("down")):3==a&&(this.body.moveLeft(this.speed),this.animations.play("left"))},b.prototype.attack=function(){if(null!=this.target){var a=this.weapon.fire(this.body.x,this.body.y,this.direction);a&&(this.nextMove=this.game.time.now+this.firingPause)}},b.prototype.multifire=function(){this.weapon.multifire(this.body.x,this.body.y)},b.prototype.rageattack=function(){var a=this.weapon.multifire(this.body.x,this.body.y,0);this.weapon.multifire(this.body.x,this.body.y,1),this.weapon.multifire(this.body.x,this.body.y,2),this.weapon.multifire(this.body.x,this.body.y,3);a&&(this.nextMove=this.game.time.now+this.firingPause)},b.prototype.resetEnemy=function(){this.hp=1,this.speed=10,this.nextAttack=1e3,this.attackRate=300+2e3*Math.random(),this.nextMove=1e3,this.name=name,this.alive=1,this.weaponSprite="purple_shot",this.damage=3,this.scale.setTo(this.game.scalemultiple),this.smoothed=!1,this.weapons=this.game.add.group(),this.weapons.enableBody=!0,this.weapons.physicsBodyType=Phaser.Physics.P2JS,this.nextEvade=0},b.prototype.setupSprite=function(){var a=this.game;this.animations.add("right",[1,2],4,!0),this.animations.add("down",[4,5],4,!0),this.animations.add("left",[7,8],4,!0),this.animations.add("up",[10,11],4,!0),this.body.setCircle(20),this.body.setCollisionGroup(a.enemyCollisionGroup),this.body.fixedRotation=!0,this.body.collides(a.weaponCollisionGroup,this.enemyHitByWeapon,this),this.body.collides(a.playerCollisionGroup),this.body.collides(a.blockCollisionGroup,this.hitBlock,this),this.body.collides([a.enemyCollisionGroup,a.tileCollisionGroup],this.hitWallOrAlly,this),this.body.mass=10,this.body.damping=.999},b.prototype.block=function(a,b){console.log("mob hit orb")},b.prototype.hitWallOrAlly=function(){this.direction=Math.floor(4*Math.random()),console.log("direction",this.direction)},b.prototype.getSprite=function(){return this},b.prototype.weaponHit=function(a,b){this.kill()},b.prototype.enemyHitByWeapon=function(a,b){this.hp-=b.sprite.damage,this.game.target.name=this.name,this.game.target.health=this.hp,void 0===b.sprite.player?this.hp<1&&this.die():(this.target=b.sprite.player,this.hateList.push(b.sprite.player),this.angleToTarget=this.game.math.normalizeAngle(this.game.physics.arcade.angleBetween(this,this.target)),this.getDirToTarget(this.angleToTarget),this.hp<1&&this.die(b.sprite.player))},b.prototype.die=function(a){this.alive=0,this.game.enemyCount--;new h(this.game,this.body.x,this.body.y,this.credits);void 0===a?console.log("player undefined on that projectiles"):(console.log("add xp from mob"),a.writeconsole("gained "+this.xp+" experience"),a.levels.addXP(this.xp)),this.destroy()},b}(Phaser.Sprite)),a("Mob",j)}}}),System.register("client/game/mobs/spider.js",["./mob"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Mob}],execute:function(){a("Spider",g=function(a){function b(e,f,g,h){c(this,b);var i=d(this,a.call(this,e,"spider",f,g,h));return i.sprite=a.prototype.getSprite.call(i),i.game=f,i.speed=10+5*Math.random(),i.hp=40,i.nextAttack=1e3,i.attackRate=200+1e3*Math.random(),i}return e(b,a),b.prototype.move=function(){a.prototype.move.call(this)},b.prototype.attack=function(){a.prototype.attack.call(this)},b.prototype.weaponHit=function(b,c){a.prototype.weaponHit.call(this,b,c)},b.prototype.enemyHitByWeapon=function(b,c){a.prototype.enemyHitByWeapon.call(this,b,c)},b}(f)),a("Spider",g)}}}),System.register("states/creator.js",["../client/game/mobs/eye","../client/game/mobs/slime","../client/game/mobs/greenalien","../client/game/mobs/red_alien","../client/game/mobs/octopus","../client/game/mobs/rat","../client/game/mobs/tealalien","../client/game/mobs/furryalien","../client/game/mobs/spider"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j,k,l,m;return{setters:[function(a){d=a.Eye},function(a){e=a.Slime},function(a){f=a.GreenAlien},function(a){g=a.RedAlien},function(a){h=a.Octopus},function(a){i=a.Rat},function(a){j=a.TealAlien},function(a){k=a.FurryAlien},function(a){l=a.Spider}],execute:function(){a("Creator",m=function(){function a(b,d){c(this,a),this.game=b,this.map=d,this.damphamlet=window.damphamlet}return a.prototype.getRandomPosition=function(a){return[Math.random()*(a.width*this.game.scalemultiple*8),Math.random()*(a.height*this.game.scalemultiple*8)]},a.prototype.createEyes=function(a){for(var b=0;a>b;b++){var c=this.getRandomPosition(this.map),e=new d("eye",this.game,c[0],c[1],b);this.game.eyes.push(e)}this.game.enemies.push(this.game.eyes)},a.prototype.createSlimes=function(a){for(var b=this.game,c=0;a>c;c++){var d=Math.random()*(b.width-200)+100,f=Math.random()*(b.height-200)+100,g=new e("slime",b,d,f,c);b.slimes.push(g)}b.enemies.push(b.slimes)},a.prototype.createGreenAliens=function(a){for(var b=0;a>b;b++){var c=this.getRandomPosition(this.map),d=new f("greenalien",this.game,c[0],c[1]);console.log("green ",c[0],c[1]),this.game.greenaliens.push(d)}this.game.enemies.push(this.game.greenaliens)},a.prototype.createRedAliens=function(a){for(var b=0;a>b;b++){var c=this.getRandomPosition(this.map),d=new g("rednalien",this.game,c[0],c[1]);this.game.redaliens.push(d)}this.game.enemies.push(this.game.redaliens)},a.prototype.createOctopi=function(a){for(var b=0;a>b;b++){var c=this.getRandomPosition(this.map),d=new h("octopus",this.game,c[0],c[1]);this.game.octopi.push(d)}this.game.enemies.push(this.game.octopi)},a.prototype.createFurryAliens=function(a){for(var b=0;a>b;b++){var c=this.getRandomPosition(this.map),d=new k("furryalien",this.game,c[0],c[1]);this.game.furryaliens.push(d)}this.game.enemies.push(this.game.furryaliens)},a.prototype.createTealAliens=function(a){for(var b=0;a>b;b++){var c=this.getRandomPosition(this.map);new k("tealalien",this.game,c[0],c[1]);this.game.tealaliens.push(furryalien)}this.game.enemies.push(this.game.tealaliens)},a.prototype.loopEnemies=function(){for(var a=0;a<this.game.enemies.length;a++){console.log("tick");for(var b=0;b<this.game.enemies[a].length;b++){var c=this.game.enemies[a][b];c.checkForPlayers(200,1400)}}},a}()),a("Creator",m)}}}),System.register("client/game/items/health.js",["phaser","./item"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h;return{setters:[function(a){f=a["default"]},function(a){g=a.Item}],execute:function(){a("Health",h=function(a){function b(e,f,g){c(this,b);var h=d(this,a.call(this,e,f,g,"item-80"));return h.item=a.prototype.getItem.call(h),h.game=e,h.item.health=2,h.item.body.collides(e.playerCollisionGroup,h.pickup,h),h}return e(b,a),b.prototype.pickup=function(b,c){c.sprite.pickupHealth(this.item.health),a.prototype.destroy.call(this)},b}(g)),a("Health",h)}}}),System.register("states/Level3.js",["../client/game/player/player","../client/game/bosses/blackhole","./creator","../client/game/items/item","../client/game/items/health","lodash"],function(a,b){
"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h,i,j,k,l;return{setters:[function(a){f=a.Player},function(a){g=a.BlackHole},function(a){h=a.Creator},function(a){i=a.Item},function(a){j=a.Health},function(a){k=a["default"]}],execute:function(){l=function(a){function b(){return c(this,b),d(this,a.apply(this,arguments))}return e(b,a),b.prototype.init=function(a){this.damphamlet=window.damphamlet;var b=this.game;b.players=[],b.playerObj=a,b.physics.p2.setImpactEvents(!0),b.onBlur.add(function(){console.log("BLURRED"),b.players.length>0&&b.players[0].pressStack.pop()},this)},b.prototype.preload=function(){this.stage.disableVisibilityChange=!0},b.prototype.render=function(){var a=this.game;a.debug.text(a.time.fps||"--",2,14,"#00ff00")},b.prototype.create=function(){var a=this.game;this.map=a.add.tilemap("level3");var b=this.map;b.addTilesetImage("tiles");var c=b.createLayer("Tile Layer 1");c.smoothed=!1,c.setScale(a.scalemultiple),c.resizeWorld();var d=b.createLayer("Tile Layer 2");d.smoothed=!1,d.setScale(a.scalemultiple),d.resizeWorld(),b.setCollisionByExclusion([332,273]);for(var e=a.physics.p2.convertTilemap(b,c),f=0;f<e.length;f++)e[f].setCollisionGroup(a.tileCollisionGroup),e[f].collides([a.playerCollisionGroup,a.weaponCollisionGroup,a.enemyWeaponCollisionGroup,a.enemyCollisionGroup]);a.physics.p2.setBoundsToWorld(!0,!0,!0,!0,!0),a.physics.p2.restitution=.8;var i={x:50,y:50,sprite:a.playerObj.playertype},j=damphamlet.loadPlayer(i);a.players.push(j),this.game.MusicHandler.playTrack("lava-deep");var k=new h(a,this.map);new g("blackhole",this.game,600,600);this.game.time.events.loop(3*Phaser.Timer.SECOND,k.loopEnemies,this)},b}(Phaser.State),a("default",l)}}}),System.register("client/game/player/marine/marinelevels.js",["../levels"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Levels}],execute:function(){a("MarineLevels",g=function(a){function b(e){c(this,b);var f=d(this,a.call(this,e));return f.player=e,f}return e(b,a),b.prototype.raiseAssaultSkill=function(){var a=this.player,b=this.skills.assault;return a.hasAssaultRifle?(this.raiseSkill(b)&&(a.assaultrifle.setDamage(_.floor(1.2*a.assaultrifle.damage)),a.writeconsole("raised assault to "+b.current+" dealing "+a.assaultrifle.damage+" damage.")),!0):(a.writeconsole("You don't have an assault rifle yet."),!1)},b.prototype.raiseExplosivesSkill=function(){var a=this.player,b=this.skills.explosives;return this.raiseSkill(b)?(a.enableGrenades(),a.writeconsole("raised explosives to  "+b.current),!0):!1},b.prototype.raisePistolSkill=function(){var a=this.player;if(!this.raiseSkill(this.skills.pistols))return!1;var b=a.pistol.damage/3+a.pistol.damage;return a.pistol.setDamage(b),!0},b.prototype.raiseSkill=function(a){var b=this.player;return a.current>=a.max?(b.writeconsole("You have nothing left to learn."),!1):b.setSkillPoints(-1)?(a.current++,!0):!1},b.prototype.raiseHealthSkill=function(){var a=this.player,b=this.skills.health;return this.raiseSkill(b)&&(a.changeMaxHp(5),a.writeconsole("raised health to "+b.current)),!0},b.prototype.raiseSpeedSkill=function(){var a=this.player,b=this.skills.speed;return this.raiseSkill(b)&&(a.changeSpeed(25),this.player.writeconsole("raised speed to "+b.current)),!0},b}(f)),a("MarineLevels",g)}}}),System.register("client/game/player/marine/stimulants.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("Stimulants",d=function(){function a(b,d){c(this,a),this.game=b,this.player=d,this.available=!0,this.cooldown=1e4,this.duration=5e3,this.cost=-1}return a.prototype.use=function(a){var b=this;this.available?!function(){b.available=!1,b.player.writeconsole("Ahh, C4. Time to pump some iron!");var c=(a.addHealth(b.cost),a.attributes.staminaRegen);a.attributes.staminaRegen*=4;var d=a.attributes.speed;a.attributes.speed+=25,console.log("stimulant bonus speed",d);var e=a.attributes.armor;a.attributes.armor+=1;var f=a.attributes.attackRate;a.attributes.attackRate+=-.25,b.game.time.events.add(b.duration,function(){return console.log("reverse stimulant effects",d),b.player.writeconsole("You feel your buzz wearing off."),a.attributes.staminaRegen=c,a.attributes.speed=d,a.attributes.armor=e,a.attributes.attackRate=f,!0}),b.game.time.events.add(b.cooldown,function(){return b.available=!0,!0})}():this.player.writeconsole("No, your heart will explode!")},a}()),a("Stimulants",d)}}}),System.register("client/game/player/marine/marine.js",["../player","../inputs","./marinelevels","./stimulants"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h,i,j;return{setters:[function(a){f=a.Player},function(a){g=a.PlayerInputs},function(a){h=a.MarineLevels},function(a){i=a.Stimulants}],execute:function(){a("Marine",j=function(a){function b(e,f,g){c(this,b);var h=d(this,a.call(this,e,f,g));return h.stimulants=new i(e,h),g?(console.log("load player object super call in marine"),a.prototype.loadPlayerObject.call(h,g),h.loadMarine()):(console.log("initialize new marine"),h.initNewPlayer()),h}return e(b,a),b.prototype.loadMarine=function(){this.levels=new h(this)},b.prototype.useFirstTalent=function(){this.stimulants.use(this)},b.prototype.useSecondTalent=function(){},b.prototype.useThirdTalent=function(){},b.prototype.initNewPlayer=function(){this.playertype=this.creationInfo.sprite,this.stagelevel=0,this.console=[],this.consoleLimit=5,this.pressStack=[],this.canmove=1,this.canfire=1,this.alive=1,this.nextHit=0,this.direction=1,this.classInfo={name:"Marine"},this.attributes={health:{current:10,max:10,regen:0},stamina:{current:100,max:100,regen:10},energy:{current:100,max:100,regen:10},speed:110,armor:0,xp:0,level:0,credits:200,weaponsFired:0,nextAttack:0,attackRate:1},this.hasPistol=1,this.hasLaserPistol=1,this.hasRocketLauncher=1,this.hasAssaultRifle=1,this.hasShotgun=1,this.hasPistol&&(this.addPistol(),this.weapon=this.pistol),this.hasLaserPistol&&this.addLaserPistol(),this.hasRocketLauncher&&this.addRocketLauncher(),this.hasAssaultRifle&&this.addAssaultRifle(),this.hasShotgun&&this.addShotgun(),this.resetSprite(this.game),this.playerinputs=new g(this.game,this)},b}(f)),a("Marine",j)}}}),System.register("client/game/player/psiops/psiorb.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e;return{setters:[],execute:function(){d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},a("PsiOrb",e=function(){function a(b,d){c(this,a),this.game=b,this.player=d,this.psiorbs=b.add.group(),this.psiorbs.enableBody=!0,this.psiorbs.physicsBodyType=Phaser.Physics.P2,this.psiorbs.parent=d,this.addOrbs(8),this.cooldown=5e3,this.orbsActive=0}return a.prototype.rotate=function(a){this.psiorbs.rotation+=a},a.prototype.createOrb=function(a,b){var c=this.psiorbs.getFirstDead();c.reset(a,b)},a.prototype.removeAllOrbs=function(){this.psiorbs.forEachAlive(function(a){a.kill()}),this.player.orbsActive=0},a.prototype.removeOrb=function(){this.psiorbs.getChildAt(this.player.orbsActive-1).kill(),this.player.orbsActive--},a.prototype.addOrbs=function(a){for(var b=0;a>b;b++){var c=this.psiorbs.create(0,0,"item-57",0,!1);this.game.physics.p2.enable(c),c.scale.setTo(.5),c.anchor.setTo(.5),c.smoothed=!1,c.body.mass=5,c.body.kinematic=!0}},a.prototype.focusPsiorb=function(a){var b=this;if(!a.canmove)return void a.writeconsole("You're already concentrating on something else.");var c=a.addEnergy(-10);if(c){var e=function(){if(a.orbsActive>=a.maxOrbs)return a.writeconsole("Your focus lapses as you try controlling too many orbs."),a.addHealth(-5),a.psiOrb.removeAllOrbs(),{v:void 0};a.writeconsole("You close your eyes as you focus on bringing another orb into existence."),a.canmove=0;var c={x:0,y:0,mag:10};switch(a.orbsActive){case 0:c.x=0,c.y=c.mag;break;case 1:c.x=c.mag,c.y=0;break;case 2:c.x=0,c.y=-c.mag;break;case 3:c.x=-c.mag,c.y=0;break;case 4:c.x=.75*c.mag,c.y=.75*c.mag;break;case 5:c.x=.75*c.mag,c.y=.75*-c.mag;break;case 6:c.x=.75*-c.mag,c.y=.75*-c.mag;break;case 7:c.x=.75*-c.mag,c.y=.75*c.mag}return b.game.time.events.add(2500,function(){return a.canmove=1,a.orbsActive++,a.psiOrb.createOrb(c.x,c.y),!0}),{v:!0}}();if("object"===("undefined"==typeof e?"undefined":d(e)))return e.v}return!1},a}()),a("PsiOrb",e)}}}),System.register("client/game/player/psiops/psilevels.js",["../levels"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Levels}],execute:function(){a("PsiLevels",g=function(a){function b(e){c(this,b);var f=d(this,a.call(this,e));return f.player=e,f}return e(b,a),b.prototype.checkLevelup=function(){var a=this.player.attributes.level,b=a+1;this.player.attributes.xp>this.levels[b]&&(this.levelup(),this.player.writeconsole("You are now level "+b))},b.prototype.levelup=function(){var a=this.player;a.attributes.level++,console.log("leveling up to "+a.attributes.level),a.setSkillPoints(1)},b.prototype.raiseConcentrationSkill=function(){var a=this.player,b=this.skills.concentration;return a.setSkillPoints(-1)&&(b.current++,a.setMaxOrbs(),a.writeconsole("raised concentration to "+b.current+".")),!0},b}(f)),a("PsiLevels",g)}}}),System.register("client/game/player/psiops/heal.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("Heal",d=function(){function a(b,d){c(this,a),this.game=b,this.player=d}return a.prototype.focusHealing=function(a){var b=this,c=a.addEnergy(-5);c&&(this.player.canmove=0,a.writeconsole("Focusing on healing wounds."),this.game.time.events.add(1e3,function(){return b.player.canmove=1,a.addHealth(1),!0}))},a.prototype.focusRegeneration=function(a){var b=this,c=a.addEnergy(-30);c&&(this.player.canmove=0,this.game.time.events.add(5e3,function(){return b.player.canmove=1,a.addHealth(50),a.writeconsole("Focusing on healing wounds."),!0}))},a}()),a("Heal",d)}}}),System.register("client/game/player/psiops/teleport.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("Teleport",d=function(){function a(b,d){c(this,a),this.game=b,this.player=d,this.power=1}return a.prototype.focusTeleportation=function(a){var b=this;this.player.canmove&&!function(){var c=a.addEnergy(-5),d=150*b.power;c&&(b.player.canmove=0,a.writeconsole("Focusing on twisting twisting space."),b.game.time.events.add(1500,function(){return b.player.canmove=1,b.teleport(d),!0}))}()},a.prototype.teleport=function(a){console.log("need to add a raycast check here");var b=this.player;switch(b.pressStack[b.pressStack.length-1]){case"left":return void(b.body.x+=-a);case"right":return void(b.body.x+=a);case"up":return void(b.body.y+=-a);case"down":return void(b.body.y+=a);default:return}},a}()),a("Teleport",d)}}}),System.register("client/game/player/psiops/psiops.js",["../player","../inputs","./psiorb","./psilevels","./heal","./teleport"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h,i,j,k,l;return{setters:[function(a){f=a.Player},function(a){g=a.PlayerInputs},function(a){h=a.PsiOrb},function(a){i=a.PsiLevels},function(a){j=a.Heal},function(a){k=a.Teleport}],execute:function(){a("PsiOps",l=function(a){function b(e,f,g){c(this,b);var i=d(this,a.call(this,e,f,g));return i.psiOrb=new h(e,i),i.healing=new j(e,i),i.teleport=new k(e,i),i.orbsActive=0,g?(console.log("load player object super call in psi ops"),a.prototype.loadPlayerObject.call(i,g),i.loadPsiOps()):(console.log("initialize new psi ops"),i.initNewPlayer()),i.setMaxOrbs(),i}return e(b,a),b.prototype.loadPsiOps=function(){console.log("before loading psi ops"),this.levels=new i(this),console.log("after loading psi ops")},b.prototype.setMaxOrbs=function(){this.maxOrbs=2+this.skills.concentration.current},b.prototype.initNewPlayer=function(){this.playertype=this.creationInfo.sprite,this.stagelevel=0,this.console=[],this.consoleLimit=5,this.pressStack=[],this.canmove=1,this.canfire=1,this.alive=1,this.nextHit=0,this.direction=1,this.classInfo={name:"Psi Ops"},this.attributes={health:{current:10,max:10,regen:0},stamina:{current:100,max:100,regen:10},energy:{current:100,max:100,regen:10},speed:125,armor:0,xp:0,level:0,credits:200,weaponsFired:0,nextAttack:0,attackRate:1},this.hasPistol=1,this.hasLaserPistol=0,this.hasRocketLauncher=0,this.hasAssaultRifle=0,this.hasShotgun=0,this.hasPistol&&(this.addPistol(),this.weapon=this.pistol),this.hasLaserPistol&&this.addLaserPistol(),this.hasRocketLauncher&&this.addRocketLauncher(),this.hasAssaultRifle&&this.addAssaultRifle(),this.hasShotgun&&this.addShotgun(),this.resetSprite(this.game),this.playerinputs=new g(this.game,this)},b.prototype.update=function(){a.prototype.update.call(this),this.psiOrb.rotate(.02)},b.prototype.useFirstTalent=function(){this.psiOrb.focusPsiorb(this)},b.prototype.useSecondTalent=function(){this.healing.focusHealing(this)},b.prototype.useThirdTalent=function(){this.teleport.focusTeleportation(this)},b.prototype.checkPsiBlock=function(){var a=.3+this.orbsActive/20;return this.game.rnd.between(0,1)<a?(this.psiOrb.removeOrb(),this.writeconsole("You anticipated the hit just in time."),!0):(this.writeconsole("You failed to anticipate where the hit was coming from in time."),!1)},b.prototype.takeDamage=function(a){var b=0;this.attributes.armor>-1&&(b=a-this.attributes.armor,1>b&&(b=1)),this.addHealth(-b);var c=this.game.rnd.between(4,6);4==c&&this.sfxHit1.play(),5==c?this.sfxHit2.play():this.sfxHit3.play()},b.prototype.hit=function(a,b){if(1==this.alive&&this.game.time.now>this.nextHit){if(this.ballsActive>0&&this.checkPsiBlock())return;null!=b&&this.takeDamage(b.sprite.damage),this.nextHit=this.game.time.now+50}},b}(f)),a("PsiOps",l)}}}),System.register("client/game/weapons/laser.js",["./weapon"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Weapon}],execute:function(){a("Laser",g=function(a){function b(e,f){c(this,b);var g=d(this,a.call(this,e,"item-101",50,f));return g.weaponsFired=0,g.speed=600,g.mass=0,g.size=1,g.damage=10,g.setup(e,f),g}return e(b,a),b.prototype.setup=function(a,b){this.fireRate=100,this.weaponsFired=0,this.name="Laser";var c=a.add.sprite(4,0,"item-37");c.smoothed=!1,c.scale.setTo(.5),c.anchor.setTo(.5,.5),b.addChild(c),c.visible=!1,this.sprite=c,this.sfxFire=a.add.audio("blaster1"),this.sfxFire2=a.add.audio("blaster2"),this.sfxReload=a.add.audio("short-reloadshotgun"),this.clipSize=100,this.clip=this.clipSize,this.ammo=1e3,this.reloadTime=1e3,this.weapons.setAll("speed",this.speed),this.weapons.setAll("mass",this.mass),this.weapons.setAll("size",this.size),this.weapons.setAll("damage",this.damage)},b.prototype.fire=function(){if(this.clip>0&&this.game.time.now>this.nextFire){var a=this.player;a.canmove=1,a.canfire=1,this.nextFire=this.game.time.now+this.fireRate,this.totalAttacks++,null!=this.clip&&(this.clip--,this.clip%3==0?this.sfxFire.play():this.sfxFire2.play());var b=this.weapons.getFirstDead();switch(b.reset(a.body.x,a.body.y),a.direction){case 0:return void b.body.moveLeft(b.speed);case 1:return void b.body.moveRight(b.speed);case 2:return b.body.rotation=90,void b.body.moveUp(b.speed);case 3:return void b.body.moveDown(b.speed)}}},b}(f)),a("Laser",g)}}}),System.register("client/game/weapons/pistol.js",["./weapon"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Weapon}],execute:function(){a("Pistol",g=function(a){function b(e,f){c(this,b);var g=d(this,a.call(this,e,"item-50",30,f));return g.setup(e,f),g}return e(b,a),b.prototype.setup=function(a,b){this.fireRate=200,this.weaponsFired=0,this.name="Pistol";var c=a.add.sprite(4,0,"item-7");c.smoothed=!1,c.scale.setTo(.5),c.anchor.setTo(.5,.5),c.visible=!1,b.addChild(c),this.sprite=c,this.sfxFire=a.add.audio("short-pistol"),this.sfxReload=a.add.audio("short-reloadpistol"),this.clipSize=6,this.clip=this.clipSize,this.ammo=10*this.clipSize,this.reloadTime=2e3,$(".clip").text(this.clip),$(".ammo").text(this.ammo),this.speed=250,this.mass=1,this.size=5,this.damage=15,this.weapons.setAll("speed",this.speed),this.weapons.setAll("mass",this.mass),this.weapons.setAll("size",this.size),this.weapons.setAll("damage",this.damage)},b.prototype.fire=function(){console.log("count"+this.weapons.countDead()),this.clip>0&&a.prototype.fire.call(this,this.fireRate)},b.prototype.reload=function(){a.prototype.reload.call(this)},b}(f)),a("Pistol",g)}}}),System.register("client/game/weapons/rockets.js",["./weapon"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Weapon}],execute:function(){a("Rockets",g=function(a){function b(e,f){c(this,b);var g=d(this,a.call(this,e,"item-45",30,f));return g.player=f,g.setup(e,f),g}return e(b,a),b.prototype.setup=function(a,b){this.fireRate=250,this.weaponsFired=0,this.name="Rockets";var c=a.add.sprite(4,0,"item-8");c.smoothed=!1,c.scale.setTo(.5),c.anchor.setTo(.5,.5),b.addChild(c),c.visible=!1,this.sprite=c,this.sfxExplosion=a.add.audio("explosion"),this.sfxFire=a.add.audio("flyby-slow"),this.clipSize=3,this.clip=this.clipSize,this.ammo=2*this.clipSize,this.reloadTime=3e3,$(".clip").text(this.clip),$(".ammo").text(this.ammo),this.speed=400,this.mass=1,this.size=5,this.damage=80,this.weapons.setAll("speed",this.speed),this.weapons.setAll("mass",this.mass),this.weapons.setAll("size",this.size),this.weapons.setAll("damage",this.damage)},b.prototype.setDamage=function(a){this.damage=a,this.weapons.setAll("damage",a)},b.prototype.weaponHit=function(a,b){this["class"].explode(this.body.x,this.body.y,a.sprite.player),this.kill()},b.prototype.explode=function(a,b,c){console.log("explode");var d=this.game;this.player=c;var e=d.add.sprite(0,0,"item-35");this.playFX(),e.smoothed=!1,e.scale.setTo(2*this.game.scalemultiple),d.physics.p2.enable(e),e.physicsBodyType=Phaser.Physics.P2JS,e.enableBody=!0,e.reset(a,b),e.body.mass=1e3,e.body.setRectangleFromSprite(),e.player=c,e.damage=10,e.force=500,e.body.setCollisionGroup(d.weaponCollisionGroup),e.body.collides([d.enemyCollisionGroup,d.tileCollisionGroup],this.explosionHit,e),this.game.time.events.add(500,function(){e&&e.kill()})},b.prototype.playFX=function(){this.sfxExplosion.play(),console.log("playing explosion")},b.prototype.explosionHit=function(a,b){var c=5,d=this.game.physics.arcade.distanceBetween(b,this),e=this.game.physics.arcade.angleBetween(b,this.player),f=Math.cos(e)*((c-d)/b.mass)*this.force,g=Math.sin(e)*((c-d)/b.mass)*this.force;console.log("mob "+b.constructor.name+" "+b.velocity.x+" "+b.velocity.y),b.velocity.x+=f,b.velocity.y+=g,console.log("mob v "+b.velocity.x+" "+b.velocity.y),this.kill()},b.prototype.fire=function(){if(this.clip>0&&a.prototype.fire.call(this,this.fireRate)){var b=this.player;0==b.direction?this.player.body.velocity.x+=300:1==b.direction?this.player.body.velocity.x-=300:2==b.direction?this.player.body.velocity.y+=300:3==b.direction&&(this.player.body.velocity.y-=300)}},b.prototype.reload=function(){a.prototype.reload.call(this)},b}(f)),a("Rockets",g)}}}),System.register("client/game/weapons/assaultrifle.js",["./weapon"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Weapon}],execute:function(){a("AssaultRifle",g=function(a){function b(e,f){c(this,b);var g=d(this,a.call(this,e,"item-50",30,f));return g.setup(e,f),g}return e(b,a),b.prototype.setup=function(a,b){this.fireRate=100,this.weaponsFired=0,this.name="Assault Rifle";var c=a.add.sprite(4,0,"item-12");c.smoothed=!1,c.scale.setTo(.5),c.anchor.setTo(.5,.5),b.addChild(c),c.visible=!1,this.sprite=c,this.clipSize=30,this.clip=this.clipSize,this.ammo=10*this.clipSize,this.reloadTime=2e3,this.sfxFire=a.add.audio("short-assaultrifle"),this.sfxReload=a.add.audio("short-reloadshotgun"),this.speed=400,this.mass=1,this.size=5,this.damage=10,this.weapons.setAll("speed",this.speed),this.weapons.setAll("mass",this.mass),this.weapons.setAll("size",this.size),this.weapons.setAll("damage",this.damage)},b.prototype.setDamage=function(a){this.damage=a,this.weapons.setAll("damage",a)},b.prototype.fire=function(){return console.log("next fire "+this.nextFire+" time "+this.game.time.now),this.game.time.now>this.nextFire&&1==this.player.canfire&&this.weapons.countDead()>0&&this.clip>0?(this.player.canmove=0,this.player.canfire=0,this.delayedFire(),!0):!1},b.prototype.delayedFire=function(){var a=this.player;a.canmove=1,a.canfire=1,this.sfxFire.play();var b=this.game.time.now-this.nextFire,c=0;200>b&&(c=b,console.log("time "+b+" spr "+c)),this.nextFire=this.game.time.now+this.fireRate*this.player.attributes.attackRate,this.totalAttacks++;var d=2+c;null!=this.clip&&(this.clip-=1);var e=this.game.rnd.between(-5,5),f=this.game.rnd.between(-5,5),g=this.weapons.getFirstDead(),h=0,i=0;switch(a.direction){case 0:h=a.body.x+4*a.weapon.sprite.x+e,i=a.body.y+4*a.weapon.sprite.y,g.reset(h,i),g.body.velocity.y+=this.game.rnd.between(-d,d),g.body.moveLeft(g.speed);break;case 1:h=a.body.x+4*a.weapon.sprite.x+e,i=a.body.y+4*a.weapon.sprite.y,g.reset(h,i),g.body.velocity.y+=this.game.rnd.between(-d,d),g.body.moveRight(g.speed);break;case 2:h=a.body.x+4*a.weapon.sprite.x,i=a.body.y+4*a.weapon.sprite.y+f,g.reset(h,i),g.body.velocity.x+=this.game.rnd.between(-d,d),g.body.rotation=90,g.body.moveUp(g.speed);break;case 3:h=a.body.x+4*a.weapon.sprite.x,i=a.body.y+4*a.weapon.sprite.y+f,g.reset(h,i),g.body.velocity.x+=this.game.rnd.between(-d,d),g.body.moveDown(g.speed)}},b.prototype.reload=function(){a.prototype.reload.call(this)},b}(f)),a("AssaultRifle",g)}}}),System.register("client/game/weapons/weapon.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e;return{setters:[],execute:function(){d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},a("Weapon",e=function(){function a(b,d,e,f){c(this,a),this.game=b,this.checkWorldBounds=!0,this.outOfBoundsKill=!0,this.player=f,this.basicSetup(),this.weapons=b.add.group(),this.weapons.enableBody=!0,this.weapons.physicsBodyType=Phaser.Physics.P2JS,this.addWeapon(0,0,d,e,this.size)}return a.prototype.basicSetup=function(){this.name="none",this.nextFire=0,this.fireRate=500,this.totalAttacks=0,this.size=5,this.speed=100,this.damage=1,this.mass=1,this.clip=-1,this.clipSize=-1,this.ammo=-1,this.ammoMax=-1,this.reloadTime=-1,this.reloading=0},a.prototype.getObj=function(){var a={};return a.fireRate=this.fireRate,a.weaponsFired=this.weaponsFired,a.name=this.name,a.clipSize=this.clipSize,a.clip=this.clip,a.ammo=this.ammo,a.reloadTime=this.reloadTime,a.speed=this.speed,a.mass=this.mass,a.size=this.size,a.damage=this.damage,console.log("getobj dmg "+this.damage),a},a.prototype.loadObj=function(a){this.fireRate=a.fireRate,this.weaponsFired=a.weaponsFired,this.name=a.name,this.clipSize=a.clipSize,this.clip=a.clip,this.ammo=a.ammo,this.reloadTime=a.reloadTime,this.speed=a.speed,this.mass=a.mass,this.size=a.size,this.damage=a.damage,console.log("set all "+this.name+" "+this.damage+"("+a.damage+")"),this.setDamage(this.damage),$(".clip").text(this.clip),$(".ammo").text(this.ammo)},a.prototype.setDamage=function(a){this.damage=a,this.weapons.setAll("damage",a)},a.prototype.reload=function(){var a=this;if(!(-1==this.clip||this.clip==this.clipSize||this.ammo<1)&&this.reloadTime>0){var b=function(){var b=a;b.reloading=1,b.sfxReload&&b.sfxReload.play(),a.nextFire=a.game.time.now+a.reloadTime;var c=a.clipSize-a.clip;return 1>c||c>a.clipSize?{v:void 0}:(c<a.ammo?(a.clip+=c,a.ammo-=c):(a.clip+=a.ammo,a.ammo=0),void a.game.time.events.add(a.reloadTime,function(){b.reloading=0,$(".clip").text(a.clip),$(".ammo").text(a.ammo)}))}();if("object"===("undefined"==typeof b?"undefined":d(b)))return b.v}},a.prototype.addWeapon=function(a,b,c,d,e){for(var f=0;d>f;f++){var g=this.weapons.create(a,b,c,0,!1);this.game.physics.p2.enable(g),g.scale.setTo(this.game.scalemultiple),g.anchor.setTo(.5,.5),g.smoothed=!1,g.enableBody=!0,g.speed=this.speed,g.damage=this.damage,g.player=this.player,g["class"]=this,g.body.mass=this.mass,g.body.setCircle(this.size),g.body.setCollisionGroup(this.game.weaponCollisionGroup),g.body.collides(this.game.blockCollisionGroup,this.block,g),g.body.collides([this.game.enemyCollisionGroup,this.game.tileCollisionGroup,this.game.blockCollisionGroup],this.weaponHit,g)}},a.prototype.block=function(a,b){console.log("blocked in weapon")},a.prototype.weaponHit=function(a,b){this.kill()},a.prototype.delayedFire=function(){var a=this.player;a.canmove=1,a.canfire=1,this.nextFire=this.game.time.now+this.fireRate,this.totalAttacks++,this.sfxFire&&this.sfxFire.play(),null!=this.clip&&(this.clip--,$(".clip").text(this.clip)),$(".weaponsFired").text(this.totalAttacks);var b=this.weapons.getFirstDead();switch(b.reset(a.body.x+4*a.weapon.sprite.x,a.body.y+4*a.weapon.sprite.y),a.direction){case 0:return void b.body.moveLeft(b.speed);case 1:return void b.body.moveRight(b.speed);case 2:return b.body.rotation=90,void b.body.moveUp(b.speed);case 3:return void b.body.moveDown(b.speed)}},a.prototype.fire=function(a){var b=this.player.attributes.attackRate*a;return console.log("next fire "+this.nextFire+" time "+this.game.time.now),this.game.time.now>this.nextFire&&1==this.player.canfire&&this.weapons.countDead()>0?(this.player.canmove=0,this.player.canfire=0,this.game.time.events.add(b,this.delayedFire,this),!0):!1},a}()),a("Weapon",e)}}}),System.register("client/game/weapons/shotgun.js",["./weapon"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Weapon}],execute:function(){a("Shotgun",g=function(a){function b(e,f){c(this,b);var g=d(this,a.call(this,e,"item-50",30,f));return g.setup(e,f),g}return e(b,a),b.prototype.setup=function(a,b){this.fireRate=500,this.weaponsFired=0,this.name="Shotgun";var c=a.add.sprite(4,0,"item-13");c.smoothed=!1,c.scale.setTo(.5),c.anchor.setTo(.5,.5),b.addChild(c),c.visible=!1,this.sprite=c,this.clipSize=2,this.clip=this.clipSize,this.ammo=10*this.clipSize,this.reloadTime=2500,this.sfxFire=a.add.audio("short-shotgun"),this.sfxFire1=a.add.audio("shotgun1"),this.sfxFire2=a.add.audio("shotgun2"),this.sfxFire3=a.add.audio("shotgun3"),
this.sfxReload=a.add.audio("short-reloadshotgun"),this.sfxReloadFire=a.add.audio("shotgunreload"),this.speed=400,this.mass=1,this.size=5,this.damage=5,this.weapons.setAll("speed",this.speed),this.weapons.setAll("mass",this.mass),this.weapons.setAll("size",this.size),this.weapons.setAll("damage",this.damage)},b.prototype.setDamage=function(a){this.damage=a,this.weapons.setAll("damage",a)},b.prototype.fire=function(){return console.log("next fire "+this.nextFire+" time "+this.game.time.now),this.game.time.now>this.nextFire&&1==this.player.canfire&&this.weapons.countDead()>0&&this.clip>0?(this.player.canmove=0,this.player.canfire=0,this.sfxReloadFire.play(),this.game.time.events.add(300,this.delayedFire,this),!0):!1},b.prototype.delayedFire=function(){var a=this.player;a.canmove=1,a.canfire=1,this.nextFire=this.game.time.now+this.fireRate,this.totalAttacks++;var b=70;if(null!=this.clip){this.clip-=1;var c=this.game.rnd.between(1,3);console.log("rnd "+c),1==c&&this.sfxFire1.play(),2==c?this.sfxFire2.play():this.sfxFire3.play()}for(var d=0;8>d;d++){var e=this.game.rnd.between(0,50),f=this.game.rnd.between(-25,25);console.log("x "+e+" y "+f);var g=this.weapons.getFirstDead(),h=0,i=0;switch(a.direction){case 0:h=a.body.x+4*a.weapon.sprite.x-e,i=a.body.y+4*a.weapon.sprite.y,g.reset(h,i),g.body.velocity.y+=this.game.rnd.between(-b,b),g.body.moveLeft(g.speed);break;case 1:h=a.body.x+4*a.weapon.sprite.x+e,i=a.body.y+4*a.weapon.sprite.y,g.reset(h,i),g.body.velocity.y+=this.game.rnd.between(-b,b),g.body.moveRight(g.speed);break;case 2:h=a.body.x+4*a.weapon.sprite.x,i=a.body.y+4*a.weapon.sprite.y+f,g.reset(h,i),g.body.velocity.x+=this.game.rnd.between(-b,b),g.body.rotation=90,g.body.moveUp(g.speed);break;case 3:h=a.body.x+4*a.weapon.sprite.x,i=a.body.y+4*a.weapon.sprite.y+f,g.reset(h,i),g.body.velocity.x+=this.game.rnd.between(-b,b),g.body.moveDown(g.speed)}}},b.prototype.reload=function(){a.prototype.reload.call(this)},b}(f)),a("Shotgun",g)}}}),System.register("client/game/items/item.js",["phaser"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e;return{setters:[function(a){d=a["default"]}],execute:function(){a("Item",e=function(){function a(b,d,e,f){c(this,a);var g=b.add.sprite(d,e,f);g.scale.setTo(b.scalemultiple/2),g.smoothed=!1,b.physics.p2.enable(g),g.body.setCircle(5),g.body.setCollisionGroup(b.itemCollisionGroup),g.body.fixedRotation=!0,this.item=g}return a.prototype.getItem=function(){return this.item},a.prototype.destroy=function(){this.item.destroy()},a}()),a("Item",e)}}}),System.register("client/game/items/ammo.js",["phaser","./item"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h;return{setters:[function(a){f=a["default"]},function(a){g=a.Item}],execute:function(){a("BulletAmmo",h=function(a){function b(e,f,g){c(this,b);var h=d(this,a.call(this,e,f,g,"item-44"));return h.item=a.prototype.getItem.call(h),h.game=e,h.item.quantity=6*e.rnd.between(1,5),h.item.body.collides(e.playerCollisionGroup,h.pickup,h),h}return e(b,a),b.prototype.pickup=function(b,c){c.sprite.addAmmo(this.item.quantity),a.prototype.destroy.call(this)},b}(g)),a("BulletAmmo",h)}}}),System.register("client/game/weapons/abilities/grenade.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("Grenade",d=function(){function a(b,d){var e=this;c(this,a),this.game=b,this.player=d,this.sfxExplosion=b.add.audio("explosion"),this.addGrenade(b,d),d.inputs.grenade.onDown.add(function(){d.items.grenades.quantity>0&&d.alive&&e.throwGrenade(d)})}return a.prototype.addGrenade=function(a,b){var c=a.add.sprite(0,0,"item-14");c.smoothed=!1,c.scale.setTo(this.game.scalemultiple),a.physics.p2.enable(c),c.physicsBodyType=Phaser.Physics.P2JS,c.enableBody=!0,this.grenade=c;var d=a.add.sprite(0,0,"item-35");d.smoothed=!1,d.scale.setTo(2*this.game.scalemultiple),a.physics.p2.enable(d),d.physicsBodyType=Phaser.Physics.P2JS,d.enableBody=!0,this.explosion=d,this.explosion.kill(),this.grenade.kill()},a.prototype.throwGrenade=function(a){var b=this,c=this.grenade;if(1!=c.alive){a.addGrenades(-1);var d=a.direction;switch(c.reset(a.body.x,a.body.y),c.anchor.setTo(.5,.5),c.body.mass=10,c.damage=1,c.player=a,c.speed=200,c.body.setCircle(10),c.body.setCollisionGroup(this.game.weaponCollisionGroup),c.body.collides([this.game.enemyCollisionGroup],this.grenadeHit,this),c.body.collides([this.game.tileCollisionGroup]),c.body.rotateLeft(75),c.body.damping=.4,c.body.angularDamping=.5,c.scale.setTo(this.game.scalemultiple/2),this.game.time.events.add(2e3,function(){b.explode(c.body.x,c.body.y,c.player,!0),c.kill()}),d){case 0:return c.body.angle=0,void c.body.moveLeft(c.speed);case 1:return c.body.angle=0,void c.body.moveRight(c.speed);case 2:return c.body.angle=180,void c.body.moveUp(c.speed);case 3:return c.body.angle=180,void c.body.moveDown(c.speed)}}},a.prototype.grenadeHit=function(a,b){a.setZeroVelocity(),a.setCircle(0)},a.prototype.explode=function(a,b,c,d){var e=this.explosion,f=this.game;e.reset(a,b),e.body.mass=1e4,e.body.setRectangleFromSprite(),e.player=c,e.damage=25,e.body.setCollisionGroup(f.weaponCollisionGroup),e.body.collides([f.enemyCollisionGroup],this.explosionHit,e),this.sfxExplosion.play(),d&&this.game.time.events.add(50,function(){e.kill()})},a.prototype.explosionHit=function(a,b){console.log("hit"),this.kill()},a}()),a("Grenade",d)}}}),System.register("client/game/player/skills.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("Skills",d=function b(){c(this,b),this.pistols=[],this.pistols.push(),this.points={available:0,allocated:0},this.sprint={name:"sprint",cost:-25,active:0},this.pistols={current:0,max:5},this.assault={current:0,max:5},this.health={current:0,max:5},this.explosives={current:0,max:1},this.speed={current:0,max:5},this.concentration={current:0,max:5}}),a("Skills",d)}}}),System.register("client/game/player/inventory.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("Inventory",d=function b(){c(this,b),this.items={medkits:{quantity:0,restore:15,carryMax:2},grenades:{quantity:0,carryMax:5}}}),a("Inventory",d)}}}),System.register("client/game/player/items.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("Items",d=function(){function a(){c(this,a),this.addAmmoTypes(),this.addConsumables(),this.addWeapons()}return a.prototype.addAmmoTypes=function(){this.LowCaliburRounds={name:"standard",quantity:6,cost:5},this.HighCaliburRounds={name:"standard",quantity:30,cost:15},this.Rockets={name:"rockets",quantity:3,cost:12},this.Shells={name:"shells",quantity:7,cost:20}},a.prototype.addConsumables=function(){this.Medkit={name:"medkit",durability:100,quality:1,cost:10},this.Grenade={name:"grenade",durability:100,quality:1,cost:10}},a.prototype.addWeapons=function(){this.Pistol={name:"Pistol",durability:100,quality:1,cost:100,type:"pistol"},this.LaserPistol={name:"Laser Pistol",durability:100,quality:1,cost:100,type:"laserpistol"},this.AssaultRifle={name:"Assault Rifle",durability:100,quality:1,cost:100,type:"assaultrifle"},this.Shotgun={name:"Shotgun",durability:50,quality:1,cost:100,type:"shotgun"},this.RocketLauncher={name:"Rocket Launcher",durability:100,quality:1,cost:150,type:"rocketlauncher"}},a}()),a("Items",d)}}}),System.register("client/game/player/shop.js",["./items"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e;return{setters:[function(a){d=a.Items}],execute:function(){a("Shop",e=function b(){c(this,b),this.items=new d}),a("Shop",e)}}}),System.register("client/game/player/player.js",["../weapons/laser","../weapons/pistol","../weapons/rockets","../weapons/assaultrifle","../weapons/shotgun","../items/ammo","../weapons/abilities/grenade","./items","./skills","./inventory","./shop","./inputs"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h,i,j,k,l,m,n,o,p,q,r;return{setters:[function(a){f=a.Laser},function(a){g=a.Pistol},function(a){h=a.Rockets},function(a){i=a.AssaultRifle},function(a){j=a.Shotgun},function(a){k=a.BulletAmmo},function(a){l=a.Grenade},function(a){m=a.Items},function(a){n=a.Skills},function(a){o=a.Inventory},function(a){p=a.Shop},function(a){q=a.PlayerInputs}],execute:function(){a("Player",r=function(a){function b(e,f,g){c(this,b);var h=d(this,a.call(this,e,f.x,f.y,f.sprite));h.creationInfo=f,h.damphamlet=window.damphamlet;var i="",j="",k=e.gender;if(h.inventory=new o,"female"==k){var l=e.characterpath+"/femalenerd.png";i='<img class="profileImg" src="'+l+'" />',j="Laura"}else{var m=e.characterpath+"/femalenerd.png";i='<img class="profileImg" src="'+m+'" />',j="Mark"}$(".imgProfile").html(""),$(".imgProfile").append(i),e.add.existing(h),e.physics.p2.enable(h),e.camera.follow(h),h.isFireDown=!1,h.playername=$(".inputName").val(),h.playername.length<1&&(h.playername=j),h.weapons=e.add.group(),h.weapons.enableBody=!0,h.weapons.physicsBodyType=Phaser.Physics.P2JS,h.animations.add("right",[1,2],3,!0),h.animations.add("down",[4,5],3,!0),h.animations.add("left",[7,8],3,!0),h.animations.add("up",[10,11],3,!0),h.animations.add("death",[13],1,!0),h.animations.add("profile",[0],1,!0),h.game=e,h.sfxHit1=e.add.audio("hurt4"),h.sfxHit2=e.add.audio("hurt5"),h.sfxHit3=e.add.audio("hurt6"),h.sfxPickup1=e.add.audio("pickup1"),h.sfxPickup2=e.add.audio("pickup2"),h.sfxPickup3=e.add.audio("pickup3"),h.sfxDeath=e.add.audio("hurt2"),h.sfxElevator=e.add.audio("elevatorOpen"),h.sfxdoorClose=e.add.audio("doorClose"),h.nextWalk=500,h.walkIndex=0,h.walk=[[e.add.audio("walkmetal1"),e.add.audio("walkmetal2"),e.add.audio("walkmetal3"),e.add.audio("walkmetal4"),e.add.audio("walkmetal5"),e.add.audio("walkmetal6"),e.add.audio("walkmetal7"),e.add.audio("walkmetal8")],[]];for(var p=0;p<h.walk[0].length;p++)h.walk[0][p].volume=.25;return h.pressStack=[],h.skills=new n,h.game.time.events.loop(3*Phaser.Timer.SECOND,h.playerLoop,h),h}return e(b,a),b.prototype.playerLoop=function(){this.regenerate()},b.prototype.regenerate=function(){this.attributes;this.addStamina(10)},b.prototype.writeconsole=function(a){this.console.length<=this.consoleLimit?this.console.push(a):(this.console.shift(),this.console.push(a)),this.consoleElement.html("");for(var b=0;b<this.console.length;b++){var c="<li>"+this.console[b]+"</li>";this.consoleElement.append(c)}},b.prototype.addPistol=function(){this.pistol=new g(this.game,this),this.hasPistol=1},b.prototype.addLaserPistol=function(){this.laser=new f(this.game,this),this.hasLaserPistol=1},b.prototype.addRocketLauncher=function(){this.rockets=new h(this.game,this),this.hasRocketLauncher=1},b.prototype.addAssaultRifle=function(){this.assaultrifle=new i(this.game,this),this.hasAssaultRifle=1},b.prototype.addShotgun=function(){this.shotgun=new j(this.game,this),this.hasShotgun=1},b.prototype.debug=function(){this.attributes.health.current=100,this.attributes.health.max=100,this.attributes.credits=1e3,this.attributes.speed=300,this.skills.points.available=10,this.items.medkits.quantity=2,this.items.grenades.quantity=5,this.hasPistol=1,this.hasLaserPistol=1,this.hasRocketLauncher=1,this.hasAssaultRifle=1,this.hasShotgun=1},b.prototype.getPlayerObject=function(){var a={};return a.stagelevel=this.stagelevel,a.console=this.console,a.consoleLimit=this.consoleLimit,a.attributes=this.attributes,a.classInfo=this.classInfo,a.items=this.items,console.log("skills in getplayerobj ",this.skills),a.skills=this.skills,a.playertype=this.playertype,a.weaponsFired=this.attributes.weaponsFired,a.canmove=this.canmove,a.canfire=this.canfire,a.alive=this.alive,a.nextHit=this.nextHit,a.pressStack=this.pressStack,a.inventory=this.inventory,a.hasPistol=this.hasPistol,a.hasLaserPistol=this.hasLaserPistol,a.hasRocketLauncher=this.hasRocketLauncher,a.hasAssaultRifle=this.hasAssaultRifle,a.hasShotgun=this.hasShotgun,a.hasPistol&&(a.pistolObj=this.pistol.getObj()),a.hasLaserPistol&&(a.laserObj=this.laser.getObj()),a.hasRocketLauncher&&(a.rocketsObj=this.rockets.getObj()),a.hasAssaultRifle&&(a.assaultrifleObj=this.assaultrifle.getObj()),a.hasShotgun&&(a.shotgunObj=this.shotgun.getObj()),a.weapon=this.weapon,a},b.prototype.scrubSkills=function(){this.skills.sprint.active&&(this.skills.sprint.active=0,this.attributes.speed-=75)},b.prototype.loadPlayerObject=function(a){this.consoleElement=$(".console"),this.pressStack=[],this.stagelevel=a.stagelevel,this.console=a.console,this.consoleLimit=a.consoleLimit,this.playertype=a.playertype,this.canmove=a.canmove,this.canfire=a.canfire,this.alive=a.alive,this.nextHit=a.nextHit,this.attributes=a.attributes,this.inventory=a.inventory,this.skills=a.skills,this.classInfo=a.classInfo,this.scrubSkills(),this.items=a.items,this.hasPistol=a.hasPistol,this.hasLaserPistol=a.hasLaserPistol,this.hasRocketLauncher=a.hasRocketLauncher,this.hasAssaultRifle=a.hasAssaultRifle,this.hasShotgun=a.hasShotgun,this.hasPistol&&(this.pistolObj=a.pistolObj,this.pistol=new g(this.game,this),this.pistol.loadObj(this.pistolObj),this.weapon=this.pistol,this.weapon.sprite.visible=!0),this.hasLaserPistol&&(this.laserObj=a.laserObj,this.laser=new f(this.game,this),this.laser.loadObj(this.laserObj)),this.hasRocketLauncher&&(this.rocketsObj=a.rocketsObj,this.rockets=new h(this.game,this),this.rockets.loadObj(this.rocketsObj)),this.hasAssaultRifle&&(this.assaultrifleObj=a.assaultrifleObj,this.assaultrifle=new i(this.game,this),this.assaultrifle.loadObj(this.assaultrifleObj)),this.hasShotgun&&(this.shotgunObj=a.shotgunObj,this.shotgun=new j(this.game,this),this.shotgun.loadObj(this.shotgunObj)),this.equipWeapon(a.weapon.name),this.skills.explosives>0&&(this.grenade=new l(this.game,this)),this.shop=new p(this),this.playerinputs=new q(this.game,this),this.resetSprite(this.game)},b.prototype.enableGrenades=function(){this.grenade=new l(this.game,this)},b.prototype.changeSpeed=function(a){this.attributes.speed+=a},b.prototype.changeMaxHp=function(a){this.attributes.health.max+=a,this.attributes.health.current+=a},b.prototype.equipWeapon=function(a){switch(a){case"Pistol":this.switchWeapons(this.pistol);break;case"Laser":this.switchWeapons(this.laser);break;case"Rockets":this.switchWeapons(this.rockets);break;case"Shotgun":this.switchWeapons(this.shotgun);break;case"Assault Rifle":this.switchWeapons(this.assaultrifle)}this.setWeaponPosition()},b.prototype.switchWeapons=function(a){this.weapon!=a&&(this.weapon.sprite.visible=!1,this.weapon=a,this.weapon.sprite.visible=!0,this.setWeaponPosition(),this.weapon.nextFire=this.game.time.now+1e3)},b.prototype.resetSprite=function(a){this.scale.setTo(a.scalemultiple),this.smoothed=!1,this.body.collideWorldBounds=!0,this.body.setCircle(15),this.body.setCollisionGroup(a.playerCollisionGroup),this.body.fixedRotation=!0,this.body.mass=10,this.body.damping=.9999999,this.body.collides([a.tileCollisionGroup]),this.body.collides([a.itemCollisionGroup,a.enemyCollisionGroup]),this.body.collides([a.weaponCollisionGroup,a.enemyWeaponCollisionGroup],this.hit,this)},b.prototype.addAmmo=function(a){this.pistol.ammo+=a},b.prototype.addHighCaliburAmmo=function(a){this.assaultrifle.ammo+=a},b.prototype.addShells=function(a){this.shotgun.ammo+=a},b.prototype.addCredits=function(a){this.attributes.credits+=a},b.prototype.addGrenades=function(a){var b=this.inventory.items.grenades;(b.quantity<b.carryMax||0>a)&&(b.quantity+=a)},b.prototype.addMedkits=function(a){var b=this.inventory.items.medkits;(b.quantity<b.carryMax||0>a)&&(b.quantity+=a)},b.prototype.addRockets=function(a){this.rockets.ammo+=a},b.prototype.addHealth=function(a){this.attributes.health.current+=a,this.attributes.health.current>this.attributes.health.max&&(this.attributes.health.current=this.attributes.health.max),this.attributes.health.current<=0&&this.die()},b.prototype.setSkillPoints=function(a){return 0>a&&this.skills.points.available<-a?(this.writeconsole("not enough talent points."),!1):(this.skills.points.available+=a,!0)},b.prototype.addArmor=function(a){this.armor=a},b.prototype.useMedkit=function(){this.items.medkits.quantity>0&&this.attributes.hp<this.attributes.maxhp&&(this.addMedkits(-1),this.addHealth(this.items.medkits.restore),this.writeconsole("Ahh, feels good."))},b.prototype.recall=function(){var a=this,b=this.getPlayerObject();this.writeconsole("Teleporting to base."),this.canmove=0,this.game.time.events.add(5e3,function(){a.canmove=1,a.game.state.start("Base",!0,!1,b)})},b.prototype.interact=function(){var a=this,b=this.getCurrentTiles(),c=b[2],d=b[3],e=b[4];if(console.log("interact"),null!=d){if(console.log("iTile"+d.index),655==d.index&&this.damphamlet.openShop(),684==d.index){this.writeconsole("Teleporting to the space station."),this.stagelevel=1;var f=this.getPlayerObject();this.game.state.start("Level"+this.stagelevel,!0,!1,f)}if(298==d.index||299==d.index){console.log("transition level"),this.stagelevel++;var g=this.getPlayerObject();this.game.state.start("Level"+this.stagelevel,!0,!1,g)}297==d.index&&this.stagelevel>0&&(this.stagelevel--,this.game.state.start("Level"+this.stagelevel,!0,!1,this)),72!=d.index&&92!=d.index&&42!=d.index&&62!=d.index||null==c||(1==d.alpha&&!function(){a.sfxElevator.play(),d.alpha=0,d.layer.dirty=!0,a.collisionBody=a.game.physics.p2.hitTest(e);var b=a.collisionBody[0].parent;a.game.physics.p2.removeBody(b),a.game.time.events.add(8e3,function(){a.sfxdoorClose.play(),a.game.physics.p2.addBody(b),d.alpha=1,d.layer.dirty=!0})}(),14==b[0]&&this.writeconsole("Teleporter to the space station."),18==b[0]&&this.writeconsole("Cellular reconstruction.")),659==d.index&&this.writeconsole("add cellular reconstruction here")}},b.prototype.reload=function(){console.log("reload"),this.weapon.reload(this)},b.prototype.addStamina=function(a){var b=this.attributes.stamina.current,c=this.attributes.stamina.max;return 0>a&&0>b+a?(this.writeconsole("not enough stamina"),!1):a>0&&b+a>c?(this.attributes.stamina.current=c,!0):(this.attributes.stamina.current+=a,!0)},b.prototype.addEnergy=function(a){var b=this.attributes.energy.current,c=this.attributes.energy.max;return 0>a&&0>b+a?(this.writeconsole("not enough energy"),!1):a>0&&b+a>c?(this.attributes.energy.current=c,!0):(this.attributes.energy.current+=a,!0)},b.prototype.sprint=function(){var a=this.attributes,b=this.skills.sprint.cost;0==this.skills.sprint.active&&a.stamina.current>b&&this.addStamina(b)&&(a.speed+=75,this.skills.sprint.active=1,console.log("sprint active"),this.game.time.events.add(3e3,function(){console.log("reduce sprint speed"),this.attributes.speed-=75,this.skills.sprint.active=0},this))},b.prototype.getCurrentTiles=function(){console.log("x "+this.body.x+" y "+this.body.y);var a=[Math.floor(this.body.x/32),Math.floor(this.body.y/32)],b=this.game.state.getCurrentState();console.log("x "+a[0]+" y "+a[1]);var c=null,d=null,e=null;if(c=b.map.getTile(a[0],a[1],"Tile Layer 2"),null==c)switch(this.direction){case 0:a[0]-=1,c=b.map.getTile(a[0],a[1],"Tile Layer 1"),d=b.map.getTile(a[0],a[1],"Tile Layer 2"),e=new Phaser.Point(this.body.x-32,this.body.y);break;case 1:a[0]+=1,c=b.map.getTile(a[0],a[1],"Tile Layer 1"),d=b.map.getTile(a[0],a[1],"Tile Layer 2"),e=new Phaser.Point(this.body.x+32,this.body.y);break;case 2:a[1]-=1,c=b.map.getTile(a[0],a[1],"Tile Layer 1"),d=b.map.getTile(a[0],a[1],"Tile Layer 2"),e=new Phaser.Point(this.body.x,this.body.y-32);break;case 3:a[1]+=1,c=b.map.getTile(a[0],a[1],"Tile Layer 1"),d=b.map.getTile(a[0],a[1],"Tile Layer 2"),e=new Phaser.Point(this.body.x,this.body.y+32)}return null==d&&(c=b.map.getTile(a[0],a[1],"Tile Layer 1"),d=b.map.getTile(a[0],a[1],"Tile Layer 2"),e=null),a.push(c),a.push(d),a.push(e),a},b.prototype.attack=function(){this.weapon.fire()},b.prototype.die=function(){this.alive=0,this.body.setCircle(0),this.sfxDeath.play(),this.dropCorpse()},b.prototype.pickupHealth=function(a){this.attributes.health.current+=a,this.attributes.health.current>this.attributes.health.max&&(this.attributes.health.current=this.attributes.health.max)},b.prototype.pickupCredits=function(a){var b=this.game.rnd.between(1,3);1==b&&this.sfxPickup1.play(),2==b?this.sfxPickup2.play():this.sfxPickup3.play(),this.attributes.credits+=a,this.writeconsole("Picked up "+a+" credits.")},b.prototype.dropCorpse=function(){this.corpse=this.game.add.sprite(this.body.x,this.body.y,this.playertype),this.corpse.smoothed=!1,this.corpse.animations.add("body",[12]),this.corpse.animations.play("body"),this.corpse.scale.setTo(4)},b.prototype.hit=function(a,b){1==this.alive&&this.game.time.now>this.nextHit&&null!=b&&this.takeDamage(b.sprite.damage)},b.prototype.takeDamage=function(a){var b=0,c=this.game.rnd.between(4,6);4==c&&this.sfxHit1.play(),5==c?this.sfxHit2.play():this.sfxHit3.play(),this.attributes.armor>-1&&(b=a-this.attributes.armor,1>b&&(b=1)),this.addHealth(-b),this.nextHit=this.game.time.now+50},b.prototype.update=function(){this.move(),this.isFireDown&&this.attack()},b.prototype.sfxWalk=function(){this.game.time.now>this.nextWalk&&(this.nextWalk=this.game.time.now+400,this.walk[0][this.walkIndex].play(),this.walkIndex++,this.walkIndex>7&&(this.walkIndex=0))},b.prototype.setWeaponPosition=function(){switch(this.direction){case 0:return this.weapon.sprite.angle=0,this.weapon.sprite.scale.x=-.5,this.weapon.sprite.x=-4,void(this.weapon.sprite.y=1);case 1:return this.weapon.sprite.scale.x=.7,this.weapon.sprite.angle=0,this.weapon.sprite.x=-1.25,void(this.weapon.sprite.y=.8);case 2:return this.weapon.sprite.scale.x=-.7,this.weapon.sprite.angle=90,this.weapon.sprite.x=3.5,void(this.weapon.sprite.y=0);case 3:return this.weapon.sprite.scale.x=-.5,this.weapon.sprite.angle=270,this.weapon.sprite.x=-3.5,void(this.weapon.sprite.y=2)}},b.prototype.move=function(){if(null!=this.body)if(0==this.alive){var a=this.attributes.speed;switch(this.weapon.sprite.visible=!1,this.pressStack[this.pressStack.length-1]){case"left":return this.body.moveLeft(a),this.animations.play("death"),void(this.direction=0);case"right":return this.body.moveRight(a),this.animations.play("death"),void(this.direction=1);case"up":return this.body.moveUp(a),this.animations.play("death"),void(this.direction=2);case"down":return this.body.moveDown(a),this.animations.play("death"),void(this.direction=3);default:this.animations.stop()}}else if(1==this.canmove){var b=this.attributes.speed;switch(this.pressStack[this.pressStack.length-1]){case"left":return this.body.moveLeft(b),this.animations.play("left"),this.direction=0,this.setWeaponPosition(),void this.sfxWalk();case"right":return this.body.moveRight(b),this.animations.play("right"),this.direction=1,this.setWeaponPosition(),void this.sfxWalk();case"up":return this.body.moveUp(b),this.animations.play("up"),this.direction=2,this.setWeaponPosition(),void this.sfxWalk();case"down":return this.body.moveDown(b),this.animations.play("down"),this.direction=3,this.setWeaponPosition(),void this.sfxWalk();default:this.animations.stop()}}},b}(Phaser.Sprite)),a("Player",r)}}}),System.register("client/game/player/inputs.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("PlayerInputs",d=function(){function a(b,d){c(this,a),this.player=d,this.game=b,d.inputs={up:b.input.keyboard.addKey(Phaser.Keyboard.W),down:b.input.keyboard.addKey(Phaser.Keyboard.S),left:b.input.keyboard.addKey(Phaser.Keyboard.A),right:b.input.keyboard.addKey(Phaser.Keyboard.D),fire:b.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),interact:b.input.keyboard.addKey(Phaser.Keyboard.E),reload:b.input.keyboard.addKey(Phaser.Keyboard.R),useMedkit:b.input.keyboard.addKey(Phaser.Keyboard.H),setSpeed:b.input.keyboard.addKey(Phaser.Keyboard.EQUALS),recall:b.input.keyboard.addKey(Phaser.Keyboard.F12),sprint:b.input.keyboard.addKey(Phaser.Keyboard.SHIFT),loadCharacter:b.input.keyboard.addKey(Phaser.Keyboard.P),loadTalents:b.input.keyboard.addKey(Phaser.Keyboard.N),weapon1:b.input.keyboard.addKey(Phaser.Keyboard.ONE),weapon2:b.input.keyboard.addKey(Phaser.Keyboard.TWO),weapon3:b.input.keyboard.addKey(Phaser.Keyboard.THREE),weapon4:b.input.keyboard.addKey(Phaser.Keyboard.FOUR),weapon5:b.input.keyboard.addKey(Phaser.Keyboard.FIVE),grenade:b.input.keyboard.addKey(Phaser.Keyboard.G),talent1:b.input.keyboard.addKey(Phaser.Keyboard.F1),talent2:b.input.keyboard.addKey(Phaser.Keyboard.F2),talent3:b.input.keyboard.addKey(Phaser.Keyboard.F3),talent4:b.input.keyboard.addKey(Phaser.Keyboard.F4),talent5:b.input.keyboard.addKey(Phaser.Keyboard.F5)},this.setupInputs(),this.setupMovement()}return a.prototype.setupInputs=function(){var a=(this.game,this.player),b=a.inputs;a.damphamlet.openDialog;b.fire.onDown.add(function(){1==a.alive&&(a.attack(),a.isFireDown=!0)},this),b.fire.onUp.add(function(){1==a.alive&&(a.isFireDown=!1)},this),b.recall.onDown.add(function(){1==a.alive&&a.recall()},this),b.sprint.onDown.add(function(){1==a.alive&&a.sprint()},this),b.talent1.onDown.add(function(){1==a.alive&&a.useFirstTalent()},this),b.talent2.onDown.add(function(){1==a.alive&&a.useSecondTalent()},this),b.talent3.onDown.add(function(){1==a.alive&&a.useThirdTalent()},this),b.talent4.onDown.add(function(){1==a.alive&&a.useFourthTalent()},this),b.talent5.onDown.add(function(){1==a.alive&&a.useFifthTalent()},this),b.weapon1.onDown.add(function(){a.switchWeapons(a.pistol)},this),b.weapon2.onDown.add(function(){return null!=a.laser?(a.switchWeapons(a.laser),!0):void a.writeconsole("You don't have a laser pistol yet.")}),b.weapon3.onDown.add(function(){return null!=a.rockets?(a.switchWeapons(a.rockets),!0):void a.writeconsole("You don't have a rocket launcher yet.")}),b.weapon4.onDown.add(function(){return null!=a.assaultrifle?(a.switchWeapons(a.assaultrifle),!0):void a.writeconsole("You don't have an assault rifle yet.")}),b.weapon5.onDown.add(function(){return null!=a.shotgun?(a.switchWeapons(a.shotgun),!0):void a.writeconsole("You don't have a shotgun yet.")}),b.interact.onDown.add(function(){a.interact()},this),b.reload.onDown.add(function(){a.reload()},this),b.useMedkit.onDown.add(function(){a.useMedkit()},this),b.setSpeed.onDown.add(function(){console.log("raise speed"),a.changeSpeed(50)},this),b.loadCharacter.onDown.add(function(){a.damphamlet.clickProfile()}),b.loadTalents.onDown.add(function(){a.damphamlet.clickAttributes()})},a.prototype.setupMovement=function(){var a=this.player,b=a.inputs,c=a.pressStack;b.up.onDown.add(function(){c.push("up")},this),b.down.onDown.add(function(){c.push("down")},this),b.left.onDown.add(function(){c.push("left")},this),b.right.onDown.add(function(){c.push("right")},this),b.up.onUp.add(function(){this.onUpRelease()},this),b.down.onUp.add(function(){this.onDownRelease()},this),b.left.onUp.add(function(){this.onLeftRelease()},this),b.right.onUp.add(function(){this.onRightRelease()},this)},a.prototype.onUpRelease=function(){var a=this.player.pressStack,b=a.indexOf("up");a.splice(b,1)},a.prototype.onDownRelease=function(){var a=this.player.pressStack,b=a.indexOf("down");a.splice(b,1)},a.prototype.onLeftRelease=function(){var a=this.player.pressStack,b=a.indexOf("left");a.splice(b,1)},a.prototype.onRightRelease=function(){var a=this.player.pressStack,b=a.indexOf("right");a.splice(b,1)},a}()),a("PlayerInputs",d)}}}),System.register("client/game/player/levels.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("Levels",d=function(){function a(b){c(this,a),this.player=b;var d=[];d[1]=1,d[2]=2,d[3]=3,d[4]=5,d[5]=8,d[6]=13,d[7]=21,d[8]=34,d[9]=55,d[10]=89,this.levels=d,this.skills=b.skills,this.nextlevel=d[this.player.attributes.level+1]}return a.prototype.addXP=function(a){var b=this.player;b.attributes.xp+=a,this.checkLevelup(),console.log("addXP in player"),$(".xp").text(b.attributes.xp)},a.prototype.checkLevelup=function(){var a=this.player,b=a.attributes.level,c=b+1;if(a.attributes.xp>this.levels[c]){var d=this.levelup();a.writeconsole("You are now level "+d+"."),this.nextlevel=this.levels[d+1]}},a.prototype.levelup=function(){var a=this.player;return a.attributes.level++,a.setSkillPoints(1),a.attributes.level},a}()),a("Levels",d)}}}),System.register("client/game/player/splicer/splicerlevels.js",["../levels"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g;return{setters:[function(a){f=a.Levels}],execute:function(){a("SplicerLevels",g=function(a){function b(e){c(this,b);var f=d(this,a.call(this,e));return f.player=e,f.handlers(),f.setSkillMax(),f}return e(b,a),b.prototype.setSkillMax=function(){console.log("implement the rest of these splicer skills"),$(".skillHealth").children().eq(3).text(this.skills.health.maxHealthSkill),$(".skillSpeed").children().eq(3).text(this.skills.speed.maxSpeedSkill)},b.prototype.checkLevelup=function(){var a=this.player.attributes.level,b=a+1;this.player.attributes.xp>this.levels[b]&&(this.levelup(),this.player.writeconsole("You are now level "+b))},b.prototype.levelup=function(){var a=this.player;a.attributes.level++,console.log("leveling up to "+a.attributes.level),a.setSkillPoints(1),$(".level").text(a.attributes.level)},b.prototype.handlers=function(){var a=this;$(".skillPistols").unbind().click(function(){a.raisePistolSkill()}),$(".skillAssault").unbind().click(function(){a.raiseConcentrationSkill()}),$(".skillExplosives").unbind().click(function(){a.raiseExplosivesSkill()}),$(".skillHealth").unbind().click(function(){a.raiseHealthSkill()}),$(".skillSpeed").unbind().click(function(){a.raiseSpeedSkill()})},b.prototype.raiseConcentrationSkill=function(){var a=this.player,b=this.skills.concentration;return a.setSkillPoints(-1)&&(b.current++,a.setMaxOrbs(),a.writeconsole("raised concentration to "+b.current+".")),!0},b}(f)),a("SplicerLevels",g)}}}),System.register("client/game/player/splicer/splicer.js",["../player","../inputs","./splicerlevels"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");
}function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f,g,h,i;return{setters:[function(a){f=a.Player},function(a){g=a.PlayerInputs},function(a){h=a.SplicerLevels}],execute:function(){a("Splicer",i=function(a){function b(e,f,g){c(this,b);var h=d(this,a.call(this,e,f,g));return g?(console.log("load player object super call in splicer"),a.prototype.loadPlayerObject.call(h,g),h.loadSplicer()):(console.log("initialize new splicer"),h.initNewPlayer()),h}return e(b,a),b.prototype.loadSplicer=function(){console.log("before loading splicer"),this.levels=new h(this),console.log("after loading splicer")},b.prototype.initNewPlayer=function(){this.playertype=this.creationInfo.sprite,this.stagelevel=0,this.console=[],this.consoleLimit=5,this.pressStack=[],this.canmove=1,this.canfire=1,this.alive=1,this.nextHit=0,this.direction=1,this.classInfo={name:"Splicer"},this.attributes={hp:10,maxhp:10,stamina:100,staminaMax:100,staminaRegen:10,energy:{current:100,max:100,regen:10},speed:125,armor:0,xp:0,level:0,credits:200,weaponsFired:0,nextAttack:0,attackRate:200},this.skills={points:{available:0,allocated:0},sprint:{name:"sprint",cost:-25,active:0},pistols:{name:"pistols",current:0,max:5},concentration:{name:"concentration",current:0,max:5},health:{name:"health",currentHealthSkill:0,maxHealthSkill:5},speed:{name:"speed",currentSpeedSkill:0,maxSpeedSkill:2}},this.dna={cat:{slot:"hands",available:0,current:0,max:0},bear:{slot:"body",available:0,current:0,max:0},eagle:{slot:"eyes",available:0,current:0,max:0}},this.items={medkits:{quantity:0,restore:15,carryMax:2},grenades:{quantity:0,carryMax:5}},this.hasPistol=1,this.hasLaserPistol=0,this.hasRocketLauncher=0,this.hasAssaultRifle=0,this.hasShotgun=0,this.hasPistol&&(this.addPistol(),this.weapon=this.pistol),this.hasLaserPistol&&this.addLaserPistol(),this.hasRocketLauncher&&this.addRocketLauncher(),this.hasAssaultRifle&&this.addAssaultRifle(),this.hasShotgun&&this.addShotgun(),this.resetSprite(this.game),this.playerinputs=new g(this.game,this),this.setupUIValues()},b.prototype.update=function(){a.prototype.update.call(this)},b.prototype.useFirstTalent=function(){},b.prototype.useSecondTalent=function(){},b.prototype.useThirdTalent=function(){},b.prototype.takeDamage=function(a){var b=0;this.attributes.armor>-1&&(b=a-this.attributes.armor,1>b&&(b=1)),this.addHealth(-b);var c=this.game.rnd.between(4,6);4==c&&this.sfxHit1.play(),5==c?this.sfxHit2.play():this.sfxHit3.play()},b.prototype.hit=function(a,b){if(1===this.alive&&this.game.time.now>this.nextHit){null!=b&&this.takeDamage(b.sprite.damage),this.nextHit=this.game.time.now+50}},b}(f)),a("Splicer",i)}}}),System.register("game.js",["../build/scripts/phaser.js","jquery","lodash","./states/GameState","./states/base","./states/Level1","./states/Level2","./states/Level3","./client/game/player/marine/marine","./client/game/player/psiops/psiops","./client/game/player/splicer/splicer"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j,k,l,m,n;return{setters:[function(a){},function(a){d=a["default"]},function(a){e=a["default"]},function(a){f=a["default"]},function(a){g=a["default"]},function(a){h=a["default"]},function(a){i=a["default"]},function(a){j=a["default"]},function(a){k=a.Marine},function(a){l=a.PsiOps},function(a){m=a.Splicer}],execute:function(){a("Game",n=function(){function a(){c(this,a),console.log("game constructor: "+this.id),this.assetpath="../static/assets/",this.itempath=this.assetpath+"items/",this.characterpath=this.assetpath+"characters/",this.enemypath=this.assetpath+"enemies/",this.bosspath=this.assetpath+"Sliced/Bosses/",this.fxpath=this.assetpath+"Sliced/fx_32x32/",this.soundpath=this.assetpath+"sounds/",this.hurtpath=this.assetpath+"sounds/hurt/",this.ambiencepath=this.assetpath+"sounds/ambience/",this.fabricpath=this.assetpath+"sounds/fabric/",this.footpath=this.assetpath+"sounds/footsteps/",this.gender="Male",this.playerClass="Marine",this.gameWidth=800,this.gameHeight=600,this.initialize(),window.game=this,this.game=this}return a.prototype.initialize=function(){this.profileDialog=document.getElementById("Profile"),this.instructionsDialog=document.getElementById("Instructions"),this.talentDialog=document.getElementById("Talents"),this.weaponsDialog=document.getElementById("Weapons"),this.explosivesDialog=document.getElementById("Explosives"),this.shopDialog=document.getElementById("Shop"),this.createDialog=document.getElementById("Create"),this.openDialog=this.createDialog,this.clickHandler()},a.prototype.clickHandler=function(){},a.prototype.startGame=function(){this.state.start("GameState")},a.prototype.getRandomPosition=function(a){return[Math.random()*(a.width*this.scalemultiple*8),Math.random()*(a.height*this.scalemultiple*8)]},a.prototype.createNewPlayer=function(a){var b="";switch(a["class"]){case"Marine":b=new k(this,a);break;case"Psi Ops":b=new l(this,a);break;case"Splicer":b=new m(this,a)}return b},a.prototype.loadPlayer=function(a){var b="";switch(this.playerObj.classInfo.name){case"Marine":b=new k(this,a,this.playerObj);break;case"Psi Ops":b=new l(this,a,this.playerObj);break;case"Splicer":b=new m(this,a,this.playerObj)}return b},a.prototype.preload=function(){this.game.load.image("logo","../build/phaser.png")},a.prototype.create=function(){var a=this.game.add.sprite(this.game.world.centerX,this.game.world.centerY,"logo");a.anchor.setTo(.5,.5)},a.prototype.clickProfile=function(){console.log("click in game"),null!=this.openDialog&&this.openDialog.hasAttribute("open")&&this.openDialog.close(),this.profileDialog.show(),this.openDialog=this.profileDialog},a.prototype.clickAttributes=function(){null!=this.openDialog&&this.openDialog.hasAttribute("open")&&this.openDialog.close(),this.talentDialog.show(),this.openDialog=this.talentDialog},a.prototype.clickWeapons=function(){null!=this.openDialog&&this.openDialog.hasAttribute("open")&&this.openDialog.close(),this.weaponsDialog.show(),this.openDialog=this.weaponsDialog},a.prototype.clickGrenade=function(){null!=this.openDialog&&this.openDialog.hasAttribute("open")&&this.openDialog.close(),this.explosivesDialog.show(),this.openDialog=this.explosivesDialog},a.prototype.clickInstructions=function(){null!=this.openDialog&&this.openDialog.hasAttribute("open")&&this.openDialog.close(),this.instructionsDialog.show(),this.openDialog=this.instructionsDialog},a.prototype.clickGender=function(a){this.gender=a.target.getAttribute("gender"),d(a.target).siblings().css("border","0.25em aliceblue ridge"),d(a.target).css("border","0.25em gold ridge")},a.prototype.clickClass=function(a){var b=a.target.getAttribute("type");this.playerClass=b,d(a.target).siblings().css("border","0.25em aliceblue ridge"),d(a.target).css("border","0.25em gold ridge"),"Mutant"!=this.playerClass&&"Cyborg"!=this.playerClass||(d(".console").append("<li> "+playerClass+" is coming soon.</li>"),this.playerClass="Marine")},a.prototype.closeMenu=function(){null!=this.openDialog&&this.openDialog.hasAttribute("open")&&this.openDialog.close()},a.prototype.play=function(){console.log("play"),this.phasergame=new Phaser.Game(800,600,Phaser.AUTO,"gameWindow",null),this.phasergame.state.add("GameState",f,!1),this.phasergame.state.add("Base",g,!1),this.phasergame.state.add("Level1",h,!1),this.phasergame.state.add("Level2",i,!1),this.phasergame.state.add("Level3",j,!1),this.phasergame.state.start("GameState"),this.closeMenu(),d(".gamePanel").show()},a}()),a("Game",n)}}}),System.register("welcome.js",["game"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g;return{setters:[function(a){d=a.Game}],execute:function(){e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),a("Welcome",f=function(){function a(){c(this,a),this.heading="Welcome to Damp Hamlet"}return a.prototype.submit=function(){},e(a,[{key:"fullName",get:function(){return this.firstName+" "+this.lastName}}]),a}()),a("Welcome",f),a("UpperValueConverter",g=function(){function a(){c(this,a)}return a.prototype.toView=function(a){return a&&a.toUpperCase()},a}()),a("UpperValueConverter",g)}}});